<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŒ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙ„ÙƒÙŠ Ø§Ù„Ù…Ø¹ÙŠØ§Ø±ÙŠ V4.0 - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø© Ø§Ù„Ù…ØµØ­Ø­Ø©</title>
    <style>
        /* ==================== Ø£Ù†Ù…Ø§Ø· CSS Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ==================== */
        :root {
            --primary-color: #00f2ff;
            --secondary-color: #f0883e;
            --success-color: #238636;
            --danger-color: #da3633;
            --info-color: #58a6ff;
            --warning-color: #ff9800;
            --dark-bg: #010409;
            --card-bg: #0d1117;
            --border-color: #30363d;
            --text-color: #ffffff;
            --text-secondary: #8b949e;
            --transition-speed: 0.3s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Tahoma', 'Geneva', 'Verdana', sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-color);
            overflow: hidden;
            height: 100vh;
            user-select: none;
            position: relative;
        }

        /* ==================== Ù†Ø§ÙØ°Ø© Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© ==================== */
        #fullscreen-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* ==================== Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ù„ÙˆÙŠ ==================== */
        .status-bar {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(90deg, 
                rgba(0, 20, 40, 0.95) 0%, 
                rgba(13, 17, 23, 0.95) 100%);
            padding: 8px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            border-bottom: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            transition: all var(--transition-speed) ease;
        }

        .status-left, .status-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .status-icon {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--primary-color);
            animation: pulse 2s infinite;
        }

        .status-icon.active {
            background: var(--success-color);
        }

        .status-icon.warning {
            background: var(--warning-color);
        }

        /* ==================== Ù„ÙˆØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (HUD) ==================== */
        .hud-main {
            position: absolute;
            top: 50px;
            left: 20px;
            background: rgba(0, 20, 40, 0.95);
            padding: 20px;
            border-left: 4px solid var(--primary-color);
            border-radius: 0 12px 12px 0;
            font-size: 14px;
            line-height: 1.6;
            pointer-events: auto;
            box-shadow: 0 0 25px rgba(0, 242, 255, 0.3);
            backdrop-filter: blur(10px);
            min-width: 320px;
            z-index: 1000;
            border: 1px solid rgba(48, 54, 61, 0.5);
            transition: all var(--transition-speed) ease;
            max-height: 80vh;
            overflow-y: auto;
        }

        .hud-main.hidden {
            transform: translateX(-100%);
            opacity: 0;
            pointer-events: none;
        }

        .hud-header {
            font-size: 18px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 15px;
            color: var(--primary-color);
            text-transform: uppercase;
            letter-spacing: 1px;
            padding-bottom: 8px;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(0, 242, 255, 0.5);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 16px;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            width: 24px;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--danger-color);
        }

        .hud-section {
            margin: 12px 0;
            padding-right: 8px;
        }

        .hud-section-title {
            color: var(--info-color);
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .hud-data {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 8px 15px;
            margin: 8px 0;
        }

        .hud-label {
            color: var(--primary-color);
            font-size: 13px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .hud-value {
            color: var(--secondary-color);
            font-family: 'Consolas', 'Courier New', monospace;
            font-weight: 600;
            text-shadow: 0 0 5px rgba(240, 136, 62, 0.3);
            text-align: left;
        }

        /* ==================== Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ==================== */
        .controls-panel {
            position: absolute;
            top: 50px;
            right: 20px;
            background: rgba(13, 17, 23, 0.98);
            padding: 20px;
            border-radius: 16px;
            border: 1px solid var(--border-color);
            width: 380px;
            z-index: 1000;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(15px);
            max-height: 80vh;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--border-color) transparent;
            transition: all var(--transition-speed) ease;
        }

        .controls-panel.hidden {
            transform: translateX(100%);
            opacity: 0;
            pointer-events: none;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(240, 136, 62, 0.5);
        }

        .panel-title {
            color: var(--secondary-color);
            font-size: 22px;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(240, 136, 62, 0.3);
        }

        /* ==================== Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø³Ø±ÙŠØ¹ ==================== */
        .quick-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .quick-btn {
            padding: 12px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--card-bg), #161b22);
            color: var(--text-color);
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            font-size: 12px;
        }

        .quick-btn:hover {
            background: linear-gradient(135deg, #30363d, #484f58);
            transform: translateY(-2px);
        }

        .quick-btn.active {
            background: linear-gradient(135deg, var(--info-color), #79c0ff);
            color: white;
            box-shadow: 0 0 20px rgba(88, 166, 255, 0.5);
        }

        .quick-btn-icon {
            font-size: 18px;
        }

        /* ==================== Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù…Ø­Ø§ÙˆØ± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø³Ù‡Ù… ==================== */
        .arrow-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
            max-width: 250px;
            margin-left: auto;
            margin-right: auto;
        }

        .arrow-btn {
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--card-bg), #161b22);
            color: var(--text-color);
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            min-height: 60px;
        }

        .arrow-btn:hover {
            background: linear-gradient(135deg, #30363d, #484f58);
            transform: scale(1.05);
        }

        .arrow-btn:active {
            transform: scale(0.95);
        }

        .arrow-btn.north {
            grid-column: 2;
            grid-row: 1;
        }

        .arrow-btn.south {
            grid-column: 2;
            grid-row: 3;
        }

        .arrow-btn.east {
            grid-column: 3;
            grid-row: 2;
        }

        .arrow-btn.west {
            grid-column: 1;
            grid-row: 2;
        }

        .arrow-btn.center {
            grid-column: 2;
            grid-row: 2;
            background: linear-gradient(135deg, #238636, #2ea043);
        }

        /* ==================== Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø·ÙŠ ==================== */
        .accordion {
            margin: 15px 0;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .accordion-header {
            background: linear-gradient(135deg, rgba(88, 166, 255, 0.1), rgba(88, 166, 255, 0.05));
            padding: 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all var(--transition-speed) ease;
        }

        .accordion-header:hover {
            background: linear-gradient(135deg, rgba(88, 166, 255, 0.2), rgba(88, 166, 255, 0.1));
        }

        .accordion-title {
            color: var(--info-color);
            font-weight: 600;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .accordion-icon {
            transition: transform var(--transition-speed) ease;
        }

        .accordion-icon.rotated {
            transform: rotate(180deg);
        }

        .accordion-content {
            padding: 15px;
            background: rgba(255, 255, 255, 0.02);
            display: none;
        }

        .accordion-content.open {
            display: block;
        }

        /* ==================== Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø®ØªÙ„ÙØ© ==================== */
        .control-group {
            margin: 15px 0;
        }

        .control-label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 500;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 12px 0;
        }

        .slider {
            flex: 1;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: linear-gradient(90deg, var(--secondary-color), var(--primary-color));
            border-radius: 3px;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            border: 3px solid var(--secondary-color);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .slider-value {
            min-width: 50px;
            text-align: left;
            font-family: 'Consolas', 'Courier New', monospace;
            color: var(--secondary-color);
            font-weight: 600;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 13px;
        }

        .checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid var(--border-color);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-speed) ease;
        }

        .checkbox.checked {
            background: var(--info-color);
            border-color: var(--info-color);
        }

        .checkbox.checked::after {
            content: 'âœ“';
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        /* ==================== Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø®ØªØµØ§Ø±Ø§Øª ==================== */
        .shortcuts-window {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, rgba(13, 17, 23, 0.98), rgba(0, 20, 40, 0.98));
            padding: 30px;
            border-radius: 20px;
            border: 2px solid var(--primary-color);
            width: 500px;
            max-width: 90vw;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 2000;
            backdrop-filter: blur(20px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
            display: none;
        }

        .shortcuts-window.active {
            display: block;
        }

        .shortcuts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .shortcut-description {
            color: var(--text-secondary);
            font-size: 13px;
        }

        .shortcut-keys {
            display: flex;
            gap: 5px;
        }

        .key {
            padding: 4px 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 12px;
            color: var(--secondary-color);
        }

        /* ==================== Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ==================== */
        .system-indicators {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            background: rgba(0, 20, 40, 0.8);
            border-radius: 8px;
            border-left: 3px solid var(--primary-color);
            backdrop-filter: blur(10px);
            min-width: 200px;
        }

        .indicator-icon {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--primary-color);
            animation: pulse 2s infinite;
        }

        .indicator-text {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* ==================== Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… ==================== */
        .notification-center {
            position: absolute;
            top: 100px;
            right: 20px;
            width: 300px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .notification {
            padding: 15px;
            background: linear-gradient(135deg, rgba(13, 17, 23, 0.95), rgba(0, 20, 40, 0.95));
            border-radius: 10px;
            border-left: 4px solid var(--info-color);
            backdrop-filter: blur(10px);
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }

        .notification.success {
            border-left-color: var(--success-color);
        }

        .notification.warning {
            border-left-color: var(--warning-color);
        }

        .notification.danger {
            border-left-color: var(--danger-color);
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .notification-title {
            font-weight: 600;
            font-size: 13px;
            color: var(--text-color);
        }

        .notification-time {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .notification-message {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* ==================== Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© ==================== */
        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.1); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        /* ==================== Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… ==================== */
        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--info-color));
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        /* ==================== Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØµØ­ÙŠØ­ ==================== */
        .debug-panel {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 11px;
            line-height: 1.4;
            max-width: 300px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .debug-panel.active {
            display: block;
        }

        /* ==================== ØªØ£Ø«ÙŠØ±Ø§Øª Ø®Ø§ØµØ© ==================== */
        .grid-highlight {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 500;
            background: radial-gradient(circle at center, transparent 30%, rgba(0, 242, 255, 0.1) 100%);
        }

        .telescope-trail {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 400;
        }

        /* ==================== Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù…/Ø§Ù„ÙØ§ØªØ­ ==================== */
        body.light-mode {
            --dark-bg: #f0f6fc;
            --card-bg: #ffffff;
            --border-color: #d0d7de;
            --text-color: #24292f;
            --text-secondary: #57606a;
        }

        /* ==================== Ø§Ù„ØªÙƒÙŠÙ Ù…Ø¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© ==================== */
        @media (max-width: 768px) {
            .hud-main, .controls-panel {
                width: 95%;
                left: 2.5%;
                right: 2.5%;
                max-height: 60vh;
            }
            
            .hud-main {
                top: 60px;
            }
            
            .controls-panel {
                top: 60px;
            }
            
            .quick-controls {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .arrow-controls {
                grid-template-columns: repeat(3, 80px);
                grid-template-rows: repeat(3, 80px);
            }
            
            .shortcuts-window {
                width: 95%;
                padding: 20px;
            }
        }

        /* ==================== Ø¥ØµÙ„Ø§Ø­Ø§Øª Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ==================== */
        .rtl-text {
            direction: rtl;
            text-align: right;
        }

        .ltr-text {
            direction: ltr;
            text-align: left;
        }

        /* ==================== ØªÙ„Ù…ÙŠØ­Ø§Øª ==================== */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            text-align: center;
            padding: 8px 12px;
            border-radius: 6px;
            position: absolute;
            z-index: 10000;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
    </style>
  <script src="astro-bridge.js"></script>
    <script src="real-stars-renderer.js"></script>
    <script src="solar-system.js"></script>
    
    <!-- Ø¥Ø¶Ø§ÙØ© Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙÙ„ÙƒÙŠØ© -->
    <!--script src="https://cdn.jsdelivr.net/gh/kutaibaa-akraa/planisphere/js/skydb.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/kutaibaa-akraa/planisphere/js/astro.js"></script-->
	   <script src="skydb.js"></script>
    <script src="astro.js"></script>
	
</head>
<body>
    <!-- ==================== Ø¹Ù†Ø§ØµØ± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ==================== -->
    
    <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
    <div class="status-bar" id="statusBar">
        <div class="status-left">
            <div class="status-item">
                <div class="status-icon active" id="systemStatus"></div>
                <span>Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙ„ÙƒÙŠ V4.0</span>
            </div>
            <div class="status-item">
                <div class="status-icon" id="telescopeStatus"></div>
                <span id="telescopeStatusText">ğŸ”­ Ù…ØªØµÙ„</span>
            </div>
            <div class="status-item">
                <div class="status-icon" id="laserStatus"></div>
                <span id="laserStatusText">ğŸ”´ Ù„ÙŠØ²Ø±: Ù…Ø¹Ø·Ù„</span>
            </div>
        </div>
        <div class="status-right">
            <div class="status-item">
                <span id="dateTime">ğŸ•’ 2024-01-01 00:00:00</span>
            </div>
            <div class="status-item">
                <span id="cpuUsage">âš¡ CPU: 0%</span>
            </div>
            <button class="close-btn" onclick="toggleFullscreen()" title="ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©">
                â›¶
            </button>
        </div>
    </div>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div class="hud-main" id="hudPanel">
        <div class="hud-header">
            <span>ğŸŒŒ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙ„ÙƒÙŠ</span>
            <button class="close-btn" onclick="toggleHUD()">âœ•</button>
        </div>
        
        <div class="hud-section">
            <div class="hud-section-title">ğŸ“ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø§ØµØ¯</div>
            <div class="hud-data">
                <div class="hud-label">ğŸŒ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶:</div>
                <div class="hud-value" id="hudLat">35.00Â° Ø´Ù…Ø§Ù„</div>
                
                <div class="hud-label">ğŸ§­ Ø®Ø· Ø§Ù„Ø·ÙˆÙ„:</div>
                <div class="hud-value" id="hudLon">45.00Â° Ø´Ø±Ù‚</div>
                
                <div class="hud-label">ğŸ“ Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ÙˆØ±:</div>
                <div class="hud-value" id="hudPolarAngle">55.00Â°</div>
                
                <div class="hud-label">ğŸŒ Ù†ØµÙ Ø§Ù„ÙƒØ±Ø©:</div>
                <div class="hud-value" id="hudHemisphere">Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ</div>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="systemLoadBar" style="width: 30%"></div>
        </div>

        <div class="hud-section">
            <div class="hud-section-title">ğŸ• Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©</div>
            <div class="hud-data">
                <div class="hud-label">ğŸŒ Ø§Ù„Ù…Ø·Ù„Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…:</div>
                <div class="hud-value" id="hudRA">00h 00m 00.0s</div>
                
                <div class="hud-label">ğŸ“ Ø§Ù„Ù…ÙŠÙ„:</div>
                <div class="hud-value" id="hudDec">+00Â° 00â€² 00â€³</div>
                
                <div class="hud-label">âœ¨ Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ù†Ø¬Ù…ÙŠ:</div>
                <div class="hud-value" id="hudLST">18h 00m 00s</div>
            </div>
        </div>

        <div class="hud-section">
            <div class="hud-section-title">ğŸ—ºï¸ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø³Ù…ØªÙŠØ©</div>
            <div class="hud-data">
                <div class="hud-label">â¬†ï¸ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹:</div>
                <div class="hud-value" id="hudAlt">0.00Â°</div>
                
                <div class="hud-label">ğŸ§­ Ø§Ù„Ø³Ù…Øª:</div>
                <div class="hud-value" id="hudAz">0.00Â°</div>
                
                <div class="hud-label">ğŸ¯ ØªÙ‚Ø§Ø·Ø¹ Ø§Ù„Ù„ÙŠØ²Ø±:</div>
                <div class="hud-value" id="hudIntersection">ØºÙŠØ± Ù†Ø´Ø·</div>
            </div>
        </div>

        <div class="hud-section">
            <div class="hud-section-title">âš™ï¸ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</div>
            <div class="hud-data">
                <div class="hud-label">ğŸ”­ ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨:</div>
                <div class="hud-value" id="hudTelescopeMode">ØªØªØ¨Ø¹</div>
                
                <div class="hud-label">âš¡ Ø³Ø±Ø¹Ø© Ø§Ù„ØªØªØ¨Ø¹:</div>
                <div class="hud-value" id="hudSpeed">1x</div>
                
                <div class="hud-label">ğŸŒ¡ï¸ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©:</div>
                <div class="hud-value" id="hudTemp">20Â°C</div>
                
                <div class="hud-label">ğŸ’¾ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°Ø§ÙƒØ±Ø©:</div>
                <div class="hud-value" id="hudMemory">45%</div>
            </div>
        </div>

        <div class="quick-controls">
            <button class="quick-btn" onclick="toggleLaser()" id="laserToggleBtn">
                <span class="quick-btn-icon">ğŸ”´</span>
                <span>Ø§Ù„Ù„ÙŠØ²Ø±</span>
            </button>
            <button class="quick-btn" onclick="toggleGrid('equatorial')" id="eqGridToggleBtn">
                <span class="quick-btn-icon">ğŸŒ</span>
                <span>Ø´Ø¨ÙƒØ© Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©</span>
            </button>
            <button class="quick-btn" onclick="toggleGrid('horizontal')" id="horGridToggleBtn">
                <span class="quick-btn-icon">ğŸ—ºï¸</span>
                <span>Ø´Ø¨ÙƒØ© Ø³Ù…ØªÙŠØ©</span>
            </button>
            <button class="quick-btn" onclick="toggleAutoTrack()" id="autoTrackBtn">
                <span class="quick-btn-icon">ğŸ”„</span>
                <span>ØªØªØ¨Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>
            </button>
            <button class="quick-btn" onclick="captureImage()" id="captureBtn">
                <span class="quick-btn-icon">ğŸ“¸</span>
                <span>Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø©</span>
            </button>
            <button class="quick-btn" onclick="toggleRecording()" id="recordBtn">
                <span class="quick-btn-icon">âºï¸</span>
                <span>ØªØ³Ø¬ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ</span>
            </button>
        </div>
    </div>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div class="controls-panel" id="controlsPanel">
        <div class="panel-header">
            <div class="panel-title">ğŸš€ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ÙÙ„ÙƒÙŠØ©</div>
            <button class="close-btn" onclick="toggleControls()">âœ•</button>
        </div>

        <!-- Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù…Ø­Ø§ÙˆØ± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø³Ù‡Ù… -->
        <div class="control-group">
            <div class="control-label">ğŸ›ï¸ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù…Ø­Ø§ÙˆØ± (Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø³Ù‡Ù…)</div>
            <div class="arrow-controls">
                <button class="arrow-btn west" onclick="moveTelescope('west')" 
                        onmousedown="startContinuousMove('west')" 
                        onmouseup="stopContinuousMove()"
                        ontouchstart="startContinuousMove('west')"
                        ontouchend="stopContinuousMove()">
                    â—€ï¸ ØºØ±Ø¨
                </button>
                <button class="arrow-btn north" onclick="moveTelescope('north')"
                        onmousedown="startContinuousMove('north')" 
                        onmouseup="stopContinuousMove()"
                        ontouchstart="startContinuousMove('north')"
                        ontouchend="stopContinuousMove()">
                    â–² Ø´Ù…Ø§Ù„
                </button>
                <button class="arrow-btn center" onclick="resetTelescope()">
                    ğŸ¯ Ù…Ø±ÙƒØ²
                </button>
                <button class="arrow-btn south" onclick="moveTelescope('south')"
                        onmousedown="startContinuousMove('south')" 
                        onmouseup="stopContinuousMove()"
                        ontouchstart="startContinuousMove('south')"
                        ontouchend="stopContinuousMove()">
                    â–¼ Ø¬Ù†ÙˆØ¨
                </button>
                <button class="arrow-btn east" onclick="moveTelescope('east')"
                        onmousedown="startContinuousMove('east')" 
                        onmouseup="stopContinuousMove()"
                        ontouchstart="startContinuousMove('east')"
                        ontouchend="stopContinuousMove()">
                    Ø´Ø±Ù‚ â–¶ï¸
                </button>
            </div>
            <div style="text-align: center; margin-top: 10px; font-size: 12px; color: var(--text-secondary);">
                Ø§Ø¶ØºØ· Ù…Ø·ÙˆÙ„Ø§Ù‹ Ù„Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø³ØªÙ…Ø±Ø©
            </div>
        </div>

        <!-- Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø·ÙŠ -->
        <div class="accordion">
            <div class="accordion-header" onclick="toggleAccordion('cameraAccordion')">
                <div class="accordion-title">
                    <span>ğŸ“·</span>
                    <span>Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</span>
                </div>
                <span class="accordion-icon">â–¼</span>
            </div>
            <div class="accordion-content" id="cameraAccordion">
                <div class="control-group">
                    <div class="control-label">ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</div>
                    <div class="quick-controls">
                        <button class="quick-btn active" onclick="setCameraMode('free')">Ø­Ø±ÙŠØ©</button>
                        <button class="quick-btn" onclick="setCameraMode('telescope')">ØªÙ„Ø³ÙƒÙˆØ¨</button>
                        <button class="quick-btn" onclick="setCameraMode('zenith')">Ø°Ø±ÙˆØ©</button>
                        <button class="quick-btn" onclick="setCameraMode('north')">Ø´Ù…Ø§Ù„</button>
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="control-label">Ø³Ø±Ø¹Ø© Ø§Ù„Ø­Ø±ÙƒØ©</div>
                    <div class="slider-container">
                        <input type="range" min="0.1" max="5" step="0.1" value="1" 
                               class="slider" id="cameraSpeedSlider" 
                               oninput="updateCameraSpeed(this.value)">
                        <span class="slider-value" id="cameraSpeedValue">1x</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="checkbox-group">
                        <label class="checkbox-label" onclick="toggleSmoothCamera()">
                            <div class="checkbox" id="smoothCameraCheckbox"></div>
                            Ø­Ø±ÙƒØ© Ø³Ù„Ø³Ø©
                        </label>
                        <label class="checkbox-label" onclick="toggleCameraInertia()">
                            <div class="checkbox" id="cameraInertiaCheckbox"></div>
                            Ù‚ØµÙˆØ± Ø­Ø±ÙƒÙŠ
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="accordion">
            <div class="accordion-header" onclick="toggleAccordion('gridsAccordion')">
                <div class="accordion-title">
                    <span>ğŸ“</span>
                    <span>Ø§Ù„Ø´Ø¨ÙƒØ§Øª Ø§Ù„ÙÙ„ÙƒÙŠØ©</span>
                </div>
                <span class="accordion-icon">â–¼</span>
            </div>
            <div class="accordion-content" id="gridsAccordion">
                <div class="control-group">
                    <div class="checkbox-group">
                        <label class="checkbox-label" onclick="toggleGrid('equatorial')">
                            <div class="checkbox checked" id="eqGridCheckbox"></div>
                            ğŸŒ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©
                        </label>
                        <label class="checkbox-label" onclick="toggleGrid('horizontal')">
                            <div class="checkbox checked" id="horGridCheckbox"></div>
                            ğŸ—ºï¸ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø³Ù…ØªÙŠØ©
                        </label>
                        <label class="checkbox-label" onclick="toggleGrid('ecliptic')">
                            <div class="checkbox" id="eclGridCheckbox"></div>
                            â˜€ï¸ Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¨Ø±ÙˆØ¬
                        </label>
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="control-label">Ø´ÙØ§ÙÙŠØ© Ø§Ù„Ø´Ø¨ÙƒØ§Øª</div>
                    <div class="slider-container">
                        <input type="range" min="10" max="100" value="40" 
                               class="slider" id="gridAlphaSlider" 
                               oninput="updateGridAlpha(this.value)">
                        <span class="slider-value" id="gridAlphaValue">40%</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="control-label">ÙƒØ«Ø§ÙØ© Ø§Ù„Ø´Ø¨ÙƒØ§Øª</div>
                    <div class="slider-container">
                        <input type="range" min="1" max="5" value="2" 
                               class="slider" id="gridDensitySlider" 
                               oninput="updateGridDensity(this.value)">
                        <span class="slider-value" id="gridDensityValue">Ù…ØªÙˆØ³Ø·Ø©</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="quick-controls">
                        <button class="quick-btn" onclick="highlightGrid('equatorial')">ØªØ³Ù„ÙŠØ· Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©</button>
                        <button class="quick-btn" onclick="highlightGrid('horizontal')">ØªØ³Ù„ÙŠØ· Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù…ØªÙŠØ©</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="accordion">
            <div class="accordion-header" onclick="toggleAccordion('telescopeAccordion')">
                <div class="accordion-title">
                    <span>ğŸ”­</span>
                    <span>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨</span>
                </div>
                <span class="accordion-icon">â–¼</span>
            </div>
            <div class="accordion-content" id="telescopeAccordion">
                <div class="control-group">
                    <div class="control-label">Ø³Ø±Ø¹Ø© Ø§Ù„ØªØªØ¨Ø¹</div>
                    <div class="slider-container">
                        <input type="range" min="0.1" max="10" step="0.1" value="1" 
                               class="slider" id="trackingSpeedSlider" 
                               oninput="updateTrackingSpeed(this.value)">
                        <span class="slider-value" id="trackingSpeedValue">1x</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="control-label">Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ù‚Ø·Ø¨ÙŠ</div>
                    <div class="slider-container">
                        <input type="range" min="0" max="90" value="35" 
                               class="slider" id="polarAngleSlider" 
                               oninput="updatePolarAngle(this.value)">
                        <span class="slider-value" id="polarAngleValue">35Â°</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="quick-controls">
                        <button class="quick-btn" onclick="alignToNorth()">Ù…Ø­Ø§Ø°Ø§Ø© Ù„Ù„Ø´Ù…Ø§Ù„</button>
                        <button class="quick-btn" onclick="alignToPole()">Ù…Ø­Ø§Ø°Ø§Ø© Ù„Ù„Ù‚Ø·Ø¨</button>
                        <button class="quick-btn" onclick="calibrateTelescope()">Ù…Ø¹Ø§ÙŠØ±Ø©</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="accordion">
            <div class="accordion-header" onclick="toggleAccordion('timeAccordion')">
                <div class="accordion-title">
                    <span>ğŸ•’</span>
                    <span>Ø§Ù„Ø²Ù…Ù† Ø§Ù„ÙÙ„ÙƒÙŠ</span>
                </div>
                <span class="accordion-icon">â–¼</span>
            </div>
            <div class="accordion-content" id="timeAccordion">
                <div class="control-group">
                    <div class="control-label">Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ù†Ø¬Ù…ÙŠ Ø§Ù„Ù…Ø­Ù„ÙŠ (LST)</div>
                    <div class="slider-container">
                        <input type="range" min="0" max="24" step="0.1" value="18" 
                               class="slider" id="lstSlider" 
                               oninput="updateLST(this.value)">
                        <span class="slider-value" id="lstValue">18.0h</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="control-label">ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø²Ù…Ù†</div>
                    <div class="slider-container">
                        <input type="range" min="0" max="1000" value="1" 
                               class="slider" id="timeSpeedSlider" 
                               oninput="updateTimeSpeed(this.value)">
                        <span class="slider-value" id="timeSpeedValue">1x</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="quick-controls">
                        <button class="quick-btn" onclick="setTimeToNow()">Ø§Ù„Ø¢Ù†</button>
                        <button class="quick-btn" onclick="setTimeToMidnight()">Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„</button>
                        <button class="quick-btn" onclick="setTimeToNoon()">Ø§Ù„Ø¸Ù‡Ø±</button>
                        <button class="quick-btn" onclick="toggleTimeFlow()">ØªØ¬Ù…Ø¯/ØªØ¯ÙÙ‚</button>
                    </div>
                </div>
            </div>
<!-- ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©ØŒ Ø£Ø¶Ù Ù‚Ø³Ù… Ø§Ù„Ù†Ø¬ÙˆÙ… -->
<div class="accordion">
    <div class="accordion-header" onclick="toggleAccordion('starsAccordion')">
        <div class="accordion-title">
            <span>âœ¨</span>
            <span>Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù†Ø¬ÙˆÙ… ÙˆØ§Ù„ÙƒÙˆØ§ÙƒØ¨</span>
        </div>
        <span class="accordion-icon">â–¼</span>
    </div>
    <div class="accordion-content" id="starsAccordion">
        <div class="control-group">
            <div class="control-label">Ø³Ø·ÙˆØ¹ Ø§Ù„Ù†Ø¬ÙˆÙ…</div>
            <div class="slider-container">
                <input type="range" min="0.1" max="2" step="0.1" value="1" 
                       class="slider" id="starBrightnessSlider" 
                       oninput="updateStarBrightness(this.value)">
                <span class="slider-value" id="starBrightnessValue">1.0x</span>
            </div>
        </div>
        
        <div class="control-group">
            <div class="control-label">Ø­Ø¬Ù… Ø§Ù„Ù†Ø¬ÙˆÙ…</div>
            <div class="slider-container">
                <input type="range" min="0.5" max="3" step="0.1" value="1" 
                       class="slider" id="starSizeSlider" 
                       oninput="updateStarSize(this.value)">
                <span class="slider-value" id="starSizeValue">1.0x</span>
            </div>
        </div>
        
        <div class="control-group">
            <div class="checkbox-group">
                <label class="checkbox-label" onclick="toggleConstellations()">
                    <div class="checkbox checked" id="constellationsCheckbox"></div>
                    ğŸŒŒ Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙˆÙƒØ¨Ø§Øª
                </label>
                <label class="checkbox-label" onclick="toggleSun()">
                    <div class="checkbox checked" id="sunCheckbox"></div>
                    â˜€ï¸ Ø¹Ø±Ø¶ Ø§Ù„Ø´Ù…Ø³
                </label>
                <label class="checkbox-label" onclick="toggleMoon()">
                    <div class="checkbox checked" id="moonCheckbox"></div>
                    ğŸŒ™ Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ù…Ø±
                </label>
            </div>
        </div>
        
        <div class="control-group">
            <div class="quick-controls">
                <button class="quick-btn" onclick="findBrightestStar()">
                    <span class="quick-btn-icon">â­</span>
                    <span>Ø£Ù„Ù…Ø¹ Ù†Ø¬Ù…</span>
                </button>
                <button class="quick-btn" onclick="findPolaris()">
                    <span class="quick-btn-icon">ğŸ§­</span>
                    <span>Ù†Ø¬Ù… Ø§Ù„Ø´Ù…Ø§Ù„</span>
                </button>
                <button class="quick-btn" onclick="togglePlanetLabels()">
                    <span class="quick-btn-icon">ğŸª</span>
                    <span>ØªØ³Ù…ÙŠØ§Øª Ø§Ù„ÙƒÙˆØ§ÙƒØ¨</span>
                </button>
            </div>
        </div>
        
        <div class="indicator" style="margin-top: 15px;">
            <div class="indicator-icon"></div>
            <div class="indicator-text" id="starCountDisplay">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¬ÙˆÙ…...</div>
        </div>
    </div>
</div>
        </div>

        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø³Ø±ÙŠØ¹ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© -->
        <div class="quick-controls" style="margin-top: 20px;">
            <button class="quick-btn" onclick="toggleShortcuts()">
                <span class="quick-btn-icon">âŒ¨ï¸</span>
                <span>Ø§Ù„Ø§Ø®ØªØµØ§Ø±Ø§Øª</span>
            </button>
            <button class="quick-btn" onclick="toggleTheme()">
                <span class="quick-btn-icon">ğŸŒ“</span>
                <span>Ø§Ù„Ù…Ø¸Ù‡Ø±</span>
            </button>
            <button class="quick-btn" onclick="saveSettings()">
                <span class="quick-btn-icon">ğŸ’¾</span>
                <span>Ø­ÙØ¸</span>
            </button>
            <button class="quick-btn" onclick="loadSettings()">
                <span class="quick-btn-icon">ğŸ“‚</span>
                <span>ØªØ­Ù…ÙŠÙ„</span>
            </button>
            <button class="quick-btn" onclick="exportData()">
                <span class="quick-btn-icon">ğŸ“¤</span>
                <span>ØªØµØ¯ÙŠØ±</span>
            </button>
            <button class="quick-btn" onclick="showHelp()">
                <span class="quick-btn-icon">â“</span>
                <span>Ù…Ø³Ø§Ø¹Ø¯Ø©</span>
            </button>
        </div>

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… Ù„Ù„ØªÙ‡ÙŠØ¦Ø© -->
        <div class="progress-bar" style="margin: 20px 0;">
            <div class="progress-fill" id="initProgressBar" style="width: 100%"></div>
        </div>
        
        <div style="text-align: center; font-size: 12px; color: var(--text-secondary); margin-top: 20px;">
            ğŸŒŒ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙ„ÙƒÙŠ Ø§Ù„Ù…Ø¹ÙŠØ§Ø±ÙŠ V4.0<br>
            ğŸš€ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø© Ø§Ù„Ù…ØµØ­Ø­Ø©
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø§Ø®ØªØµØ§Ø±Ø§Øª -->
    <div class="shortcuts-window" id="shortcutsWindow">
        <div class="hud-header">
            <span>âŒ¨ï¸ Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­</span>
            <button class="close-btn" onclick="toggleShortcuts()">âœ•</button>
        </div>
        
        <div class="shortcuts-grid">
            <!-- Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ø§Ù… -->
            <div class="shortcut-item">
                <div class="shortcut-description">Ø¥Ø®ÙØ§Ø¡/Ø¥Ø¸Ù‡Ø§Ø± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ­ÙƒÙ…</div>
                <div class="shortcut-keys">
                    <span class="key">Ctrl</span>
                    <span class="key">H</span>
                </div>
            </div>
            
            <div class="shortcut-item">
                <div class="shortcut-description">Ø¥Ø®ÙØ§Ø¡/Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
                <div class="shortcut-keys">
                    <span class="key">Ctrl</span>
                    <span class="key">D</span>
                </div>
            </div>
            
            <div class="shortcut-item">
                <div class="shortcut-description">ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©</div>
                <div class="shortcut-keys">
                    <span class="key">F11</span>
                </div>
            </div>
            
            <!-- Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø´Ø¨ÙƒØ§Øª -->
            <div class="shortcut-item">
                <div class="shortcut-description">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©</div>
                <div class="shortcut-keys">
                    <span class="key">G</span>
                </div>
            </div>
            
            <div class="shortcut-item">
                <div class="shortcut-description">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø³Ù…ØªÙŠØ©</div>
                <div class="shortcut-keys">
                    <span class="key">H</span>
                </div>
            </div>
            
            <div class="shortcut-item">
                <div class="shortcut-description">ØªØ¨Ø¯ÙŠÙ„ Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¨Ø±ÙˆØ¬</div>
                <div class="shortcut-keys">
                    <span class="key">J</span>
                </div>
            </div>
            
            <!-- Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ -->
            <div class="shortcut-item">
                <div class="shortcut-description">ØªØ­Ø±ÙŠÙƒ Ø´Ù…Ø§Ù„Ø§Ù‹</div>
                <div class="shortcut-keys">
                    <span class="key">â†‘</span>
                </div>
            </div>
            
            <div class="shortcut-item">
                <div class="shortcut-description">ØªØ­Ø±ÙŠÙƒ Ø¬Ù†ÙˆØ¨Ø§Ù‹</div>
                <div class="shortcut-keys">
                    <span class="key">â†“</span>
                </div>
            </div>
            
            <div class="shortcut-item">
                <div class="shortcut-description">ØªØ­Ø±ÙŠÙƒ Ø´Ø±Ù‚Ø§Ù‹</div>
                <div class="shortcut-keys">
                    <span class="key">â†’</span>
                </div>
            </div>
            
            <div class="shortcut-item">
                <div class="shortcut-description">ØªØ­Ø±ÙŠÙƒ ØºØ±Ø¨Ø§Ù‹</div>
                <div class="shortcut-keys">
                    <span class="key">â†</span>
                </div>
            </div>
            
            <!-- Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù„ÙŠØ²Ø± -->
            <div class="shortcut-item">
                <div class="shortcut-description">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ÙŠØ²Ø±</div>
                <div class="shortcut-keys">
                    <span class="key">L</span>
                </div>
            </div>
            
            <!-- Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ -->
            <div class="shortcut-item">
                <div class="shortcut-description">ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø­Ø±</div>
                <div class="shortcut-keys">
                    <span class="key">1</span>
                </div>
            </div>
            
            <div class="shortcut-item">
                <div class="shortcut-description">ÙˆØ¶Ø¹ ØªØªØ¨Ø¹ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨</div>
                <div class="shortcut-keys">
                    <span class="key">2</span>
                </div>
            </div>
            
            <div class="shortcut-item">
                <div class="shortcut-description">ÙˆØ¶Ø¹ Ø§Ù„Ø°Ø±ÙˆØ©</div>
                <div class="shortcut-keys">
                    <span class="key">3</span>
                </div>
            </div>
            
            <!-- Ø£Ø¯ÙˆØ§Øª Ø¥Ø¶Ø§ÙÙŠØ© -->
            <div class="shortcut-item">
                <div class="shortcut-description">Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø©</div>
                <div class="shortcut-keys">
                    <span class="key">P</span>
                </div>
            </div>
            
            <div class="shortcut-item">
                <div class="shortcut-description">Ø¨Ø¯Ø¡/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ³Ø¬ÙŠÙ„</div>
                <div class="shortcut-keys">
                    <span class="key">R</span>
                </div>
            </div>
            
            <div class="shortcut-item">
                <div class="shortcut-description">Ø¹Ø±Ø¶ Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø§ÙØ°Ø©</div>
                <div class="shortcut-keys">
                    <span class="key">F1</span>
                </div>
            </div>
            
            <div class="shortcut-item">
                <div class="shortcut-description">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†</div>
                <div class="shortcut-keys">
                    <span class="key">Home</span>
                </div>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 20px; font-size: 12px; color: var(--text-secondary);">
            ğŸ’¡ ÙŠÙ…ÙƒÙ† ØªØ®ØµÙŠØµ Ù‡Ø°Ù‡ Ø§Ù„Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
        </div>
    </div>

    <!-- Ù…Ø±ÙƒØ² Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div class="notification-center" id="notificationCenter"></div>

    <!-- Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… -->
    <div class="system-indicators">
        <div class="indicator">
            <div class="indicator-icon"></div>
            <div class="indicator-text">Ø§Ù„Ù†Ø¸Ø§Ù…: <span id="systemStatusText">Ù†Ø´Ø·</span></div>
        </div>
        <div class="indicator">
            <div class="indicator-icon"></div>
            <div class="indicator-text">Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨: <span id="telescopeIndicator">Ø¬Ø§Ù‡Ø²</span></div>
        </div>
        <div class="indicator">
            <div class="indicator-icon"></div>
            <div class="indicator-text">Ø§Ù„Ø´Ø¨ÙƒØ§Øª: <span id="gridsIndicator">Ù…ÙØ¹Ù‘Ù„Ø©</span></div>
        </div>
    </div>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØµØ­ÙŠØ­ -->
    <div class="debug-panel" id="debugPanel">
        <div style="color: var(--info-color); font-weight: bold; margin-bottom: 10px;">ğŸ§ª Ù„ÙˆØ­Ø© Ø§Ù„ØªØµØ­ÙŠØ­</div>
        <div id="debugContent"></div>
    </div>

    <!-- Ø¹Ù†Ø§ØµØ± Three.js -->
    <canvas id="threeCanvas" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;"></canvas>

    <!-- ==================== Ù…ÙƒØªØ¨Ø§Øª JavaScript ==================== -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/math/Lut.js"></script>
    
    <!-- ==================== Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ JavaScript ==================== -->
    <script>
        // ===================================================================
        // ğŸŒŒ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙ„ÙƒÙŠ Ø§Ù„Ù…Ø¹ÙŠØ§Ø±ÙŠ V4.0 - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø© Ø§Ù„Ù…ØµØ­Ø­Ø©
        // ===================================================================
        // Ù†Ø¸Ø§Ù… Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ù…ØµØ­Ø­ Ù„Ù†ØµÙ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ Ù…Ø¹ ÙˆØ§Ø¬Ù‡Ø© ØªØ­ÙƒÙ… Ù…ØªÙ‚Ø¯Ù…Ø©
        // ===================================================================

        // ==================== ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø«ÙˆØ§Ø¨Øª ÙˆØ§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© ====================
        const SYSTEM = {
            VERSION: '4.0',
            SPHERE_RADIUS: 200,
            INITIAL_LATITUDE: 35.0,  // Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ø´Ù…Ø§Ù„Ø§Ù‹)
            HEMISPHERE: 'north',     // Ù†ØµÙ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ
            GRID_DENSITY_LEVELS: {
                1: { name: 'Ø®ÙÙŠÙØ©', alt: 30, az: 45, ra: 30, dec: 30 },
                2: { name: 'Ù…ØªÙˆØ³Ø·Ø©', alt: 15, az: 15, ra: 15, dec: 15 },
                3: { name: 'ÙƒØ«ÙŠÙØ©', alt: 10, az: 10, ra: 10, dec: 10 },
                4: { name: 'ÙƒØ«ÙŠÙØ© Ø¬Ø¯Ø§Ù‹', alt: 5, az: 5, ra: 5, dec: 5 },
                5: { name: 'Ù…ÙØ±Ø·Ø©', alt: 2, az: 2, ra: 2, dec: 2 }
            },
            COLOR_PALETTE: {
                PRIMARY: 0x00f2ff,
                SECONDARY: 0xf0883e,
                SUCCESS: 0x238636,
                DANGER: 0xda3633,
                INFO: 0x58a6ff,
                WARNING: 0xff9800,
                GRID_EQUATORIAL: 0x1f6feb,
                GRID_HORIZONTAL: 0xf0883e,
                GRID_ECLIPTIC: 0x9d4edd,
                GROUND: 0x05101a,
                SKY: 0x0a1e3c
            },
            KEYBOARD_SHORTCUTS: {
                TOGGLE_CONTROLS: { key: 'h', ctrl: true },
                TOGGLE_HUD: { key: 'd', ctrl: true },
                TOGGLE_EQUATORIAL_GRID: { key: 'g' },
                TOGGLE_HORIZONTAL_GRID: { key: 'h' },
                TOGGLE_ECLIPTIC_GRID: { key: 'j' },
                MOVE_NORTH: { key: 'ArrowUp' },
                MOVE_SOUTH: { key: 'ArrowDown' },
                MOVE_EAST: { key: 'ArrowRight' },
                MOVE_WEST: { key: 'ArrowLeft' },
                TOGGLE_LASER: { key: 'l' },
                CAMERA_FREE: { key: '1' },
                CAMERA_TELESCOPE: { key: '2' },
                CAMERA_ZENITH: { key: '3' },
                CAPTURE_IMAGE: { key: 'p' },
                START_RECORDING: { key: 'r' },
                SHOW_HELP: { key: 'F1' },
                RESET: { key: 'Home' },
                FULLSCREEN: { key: 'F11' }
            },
            MOVEMENT_SPEED: {
                SLOW: 0.01,
                NORMAL: 0.05,
                FAST: 0.1,
                VERY_FAST: 0.2
            }
        };

        // ==================== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© ====================
        let scene, camera, renderer, controls;
        let polarFrame, raShaft, decAxis, telescope, laserBeam;
        let ground, horizonCircle;
        let celestialSphere, equatorialGrid, horizontalGrid, eclipticGrid;
        let stars, constellations;
        
        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ­ÙƒÙ…
        let moveInterval = null;
        let currentSpeed = 1;
        let cameraSpeed = 1;
        let cameraMode = 'free';
        let localSiderealTime = 18.0;
        let timeSpeed = 1;
        let isTimeFlowing = true;
        let currentLatitude = SYSTEM.INITIAL_LATITUDE;
        let currentHemisphere = SYSTEM.HEMISPHERE;
        let gridVisibility = {
            equatorial: true,
            horizontal: true,
            ecliptic: false
        };
        let gridDensity = 2;
        let gridAlpha = 0.4;
        let laserEnabled = false;
        let autoTracking = false;
        let isRecording = false;
        let isFullscreen = false;
        let hudVisible = true;
        let controlsVisible = true;
        let smoothCamera = true;
        let cameraInertia = true;
        
        // Ø¹Ù†Ø§ØµØ± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        let hudPanel, controlsPanel, shortcutsWindow;
        let notificationCenter, debugPanel;
        
        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
        let frameCount = 0;
        let lastTime = performance.now();
        let fps = 60;
        let systemLoad = 0;
        
        // ==================== Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„ÙÙ„ÙƒÙŠ Ø§Ù„Ù…ØµØ­Ø­ ====================
        const ASTRONOMICAL_SYSTEM = {
            VERSION: '4.0-corrected-northern',
            
            /**
             * ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª ÙƒØ±ÙˆÙŠØ© Ø¥Ù„Ù‰ Ø¯ÙŠÙƒØ§Ø±ØªÙŠØ© - Ù†Ø¸Ø§Ù… Ù†ØµÙ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ­Ø­
             * @param {number} azimuth - Ø§Ù„Ø³Ù…Øª Ø¨Ø§Ù„Ø¯Ø±Ø¬Ø§Øª (0Â° Ø´Ù…Ø§Ù„ØŒ 90Â° Ø´Ø±Ù‚ØŒ 180Â° Ø¬Ù†ÙˆØ¨ØŒ 270Â° ØºØ±Ø¨)
             * @param {number} altitude - Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø¨Ø§Ù„Ø¯Ø±Ø¬Ø§Øª (0Â° Ø£ÙÙ‚ØŒ 90Â° Ø°Ø±ÙˆØ©)
             * @param {number} radius - Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø±
             * @returns {Object} Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø¯ÙŠÙƒØ§Ø±ØªÙŠØ© {x, y, z}
             */
            sphericalToCartesian: function(azimuth, altitude, radius = SYSTEM.SPHERE_RADIUS) {
                // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø²ÙˆØ§ÙŠØ§ Ù…Ù† Ø¯Ø±Ø¬Ø§Øª Ø¥Ù„Ù‰ Ø±Ø§Ø¯ÙŠØ§Ù†
                const azRad = THREE.MathUtils.degToRad(azimuth);
                const altRad = THREE.MathUtils.degToRad(altitude);
                
                // Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø«Ù„Ø«ÙŠØ©
                const cosAlt = Math.cos(altRad);
                const sinAlt = Math.sin(altRad);
                const cosAz = Math.cos(azRad);
                const sinAz = Math.sin(azRad);
                
                // Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø¯ÙŠÙƒØ§Ø±ØªÙŠØ© Ø§Ù„Ù…ØµØ­Ø­Ø© Ù„Ù†ØµÙ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ
                // Ø§Ù„Ù†Ø¸Ø§Ù…: -x = Ø´Ø±Ù‚ØŒ y = Ø§Ø±ØªÙØ§Ø¹ØŒ z = Ø´Ù…Ø§Ù„
                return {
                    x: -radius * cosAlt * sinAz,      // Ø§Ù„Ø´Ø±Ù‚ (+ Ø´Ø±Ù‚)
                    y: radius * sinAlt,              // Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ (+ Ø£Ø¹Ù„Ù‰)
                    z: radius * cosAlt * cosAz       // Ø§Ù„Ø´Ù…Ø§Ù„ (+ Ø´Ù…Ø§Ù„)
                };
            },
            
            /**
             * ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø¯ÙŠÙƒØ§Ø±ØªÙŠØ© Ø¥Ù„Ù‰ ÙƒØ±ÙˆÙŠØ© - Ù†Ø¸Ø§Ù… Ù†ØµÙ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ­Ø­
             * @param {number} x - Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ø´Ø±Ù‚ÙŠ
             * @param {number} y - Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ø±Ø£Ø³ÙŠ
             * @param {number} z - Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ
             * @returns {Object} Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª ÙƒØ±ÙˆÙŠØ© {azimuth, altitude, radius}
             */
            cartesianToSpherical: function(x, y, z) {
                const radius = Math.sqrt(x*x + y*y + z*z);
                
                if (radius === 0) {
                    return { azimuth: 0, altitude: 0, radius: 0 };
                }
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹
                const altitude = THREE.MathUtils.radToDeg(Math.asin(y / radius));
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ù…Øª Ù…Ø¹ Ø§Ù„ØªØµØ­ÙŠØ­ Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù†ØµÙ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ
                let azimuth = THREE.MathUtils.radToDeg(Math.atan2(-x, z));
                
                // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø³Ù…Øª Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¯Ù‰ [0Â°, 360Â°]
                if (azimuth < 0) azimuth += 360;
                
                return {
                    azimuth: azimuth,
                    altitude: altitude,
                    radius: radius
                };
            },
            
            /**
             * Ø­Ø³Ø§Ø¨ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù‚Ø·Ø¨ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠ
             * @param {number} latitude - Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ Ø¨Ø§Ù„Ø¯Ø±Ø¬Ø§Øª
             * @returns {Object} Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ù‚Ø·Ø¨ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠ {x, y, z}
             */
            getNorthCelestialPolePosition: function(latitude) {
                // ÙÙŠ Ù†ØµÙ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØŒ Ø§Ù„Ù‚Ø·Ø¨ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠ ÙŠÙ‚Ø¹ Ø¹Ù†Ø¯:
                // - Ø§Ù„Ø³Ù…Øª: 0Â° (Ø´Ù…Ø§Ù„)
                // - Ø§Ù„Ø§Ø±ØªÙØ§Ø¹: Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶
                return this.sphericalToCartesian(0, latitude);
            },
            
            /**
             * ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ© Ø¥Ù„Ù‰ Ø³Ù…ØªÙŠØ© - Ù„Ù†ØµÙ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ
             * @param {number} raHours - Ø§Ù„Ù…Ø·Ù„Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ø¨Ø§Ù„Ø³Ø§Ø¹Ø§Øª
             * @param {number} decDeg - Ø§Ù„Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø¯Ø±Ø¬Ø§Øª
             * @param {number} latDeg - Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶
             * @param {number} lstHours - Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ù†Ø¬Ù…ÙŠ Ø§Ù„Ù…Ø­Ù„ÙŠ
             * @returns {Object} Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø³Ù…ØªÙŠØ© {altitude, azimuth}
             */
            equatorialToHorizontal: function(raHours, decDeg, latDeg, lstHours) {
                // ØªØ­ÙˆÙŠÙ„ RA Ù…Ù† Ø³Ø§Ø¹Ø§Øª Ø¥Ù„Ù‰ Ø¯Ø±Ø¬Ø§Øª
                const raDeg = raHours * 15;
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø³Ø§Ø¹ÙŠØ©
                let haDeg = (lstHours * 15 - raDeg) % 360;
                if (haDeg < 0) haDeg += 360;
                
                // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ø±Ø§Ø¯ÙŠØ§Ù†
                const haRad = THREE.MathUtils.degToRad(haDeg);
                const decRad = THREE.MathUtils.degToRad(decDeg);
                const latRad = THREE.MathUtils.degToRad(latDeg);
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹
                const sinAlt = Math.sin(decRad) * Math.sin(latRad) +
                              Math.cos(decRad) * Math.cos(latRad) * Math.cos(haRad);
                const altitude = THREE.MathUtils.radToDeg(Math.asin(sinAlt));
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ù…Øª
                const cosAz = (Math.sin(decRad) - Math.sin(latRad) * sinAlt) /
                             (Math.cos(latRad) * Math.cos(THREE.MathUtils.degToRad(altitude)));
                
                const clampedCosAz = Math.max(-1, Math.min(1, cosAz));
                let azimuth = THREE.MathUtils.radToDeg(Math.acos(clampedCosAz));
                
                // ØªØµØ­ÙŠØ­ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø³Ù…Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø³Ø§Ø¹ÙŠØ©
                if (Math.sin(haRad) > 0) {
                    azimuth = 360 - azimuth;
                }
                
                return {
                    altitude: Math.max(-90, Math.min(90, altitude)),
                    azimuth: azimuth % 360
                };
            },
            
            /**
             * ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø³Ù…ØªÙŠØ© Ø¥Ù„Ù‰ Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ© - Ù„Ù†ØµÙ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ
             * @param {number} altDeg - Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø¨Ø§Ù„Ø¯Ø±Ø¬Ø§Øª
             * @param {number} azDeg - Ø§Ù„Ø³Ù…Øª Ø¨Ø§Ù„Ø¯Ø±Ø¬Ø§Øª
             * @param {number} latDeg - Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶
             * @param {number} lstHours - Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ù†Ø¬Ù…ÙŠ Ø§Ù„Ù…Ø­Ù„ÙŠ
             * @returns {Object} Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ© {raHours, decDeg}
             */
            horizontalToEquatorial: function(altDeg, azDeg, latDeg, lstHours) {
                const altRad = THREE.MathUtils.degToRad(altDeg);
                const azRad = THREE.MathUtils.degToRad(azDeg);
                const latRad = THREE.MathUtils.degToRad(latDeg);
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙŠÙ„
                const sinDec = Math.sin(altRad) * Math.sin(latRad) +
                              Math.cos(altRad) * Math.cos(latRad) * Math.cos(azRad);
                const decDeg = THREE.MathUtils.radToDeg(Math.asin(sinDec));
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø³Ø§Ø¹ÙŠØ©
                const cosHA = (Math.sin(altRad) - Math.sin(latRad) * sinDec) /
                             (Math.cos(latRad) * Math.cos(THREE.MathUtils.degToRad(decDeg)));
                
                const clampedCosHA = Math.max(-1, Math.min(1, cosHA));
                let haDeg = THREE.MathUtils.radToDeg(Math.acos(clampedCosHA));
                
                // ØªØµØ­ÙŠØ­ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø³Ø§Ø¹ÙŠØ©
                if (Math.sin(azRad) > 0) {
                    haDeg = -haDeg;
                }
                
                const haHours = haDeg / 15;
                let raHours = (lstHours - haHours + 24) % 24;
                
                return {
                    raHours: raHours,
                    decDeg: decDeg
                };
            },
            
            /**
             * Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„ Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ù…ØµØ­Ø­
             */
            testCoordinateSystem: function() {
                const tests = [
                    { az: 0, alt: 0, desc: "Ø§Ù„Ø´Ù…Ø§Ù„ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ" },
                    { az: 90, alt: 0, desc: "Ø§Ù„Ø´Ø±Ù‚ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ" },
                    { az: 180, alt: 0, desc: "Ø§Ù„Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ" },
                    { az: 270, alt: 0, desc: "Ø§Ù„ØºØ±Ø¨ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ" },
                    { az: 0, alt: 90, desc: "Ø§Ù„Ø°Ø±ÙˆØ©" },
                    { az: 0, alt: currentLatitude, desc: "Ø§Ù„Ù‚Ø·Ø¨ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠ" }
                ];
                
                const results = [];
                
                tests.forEach(test => {
                    const cart = this.sphericalToCartesian(test.az, test.alt);
                    const sph = this.cartesianToSpherical(cart.x, cart.y, cart.z);
                    
                    const azError = Math.abs(sph.azimuth - test.az);
                    const altError = Math.abs(sph.altitude - test.alt);
                    
                    results.push({
                        description: test.desc,
                        input: { az: test.az, alt: test.alt },
                        cartesian: cart,
                        spherical: sph,
                        errors: { az: azError, alt: altError },
                        passed: azError < 0.01 && altError < 0.01
                    });
                });
                
                return results;
            }
        };

        // ==================== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… ====================
        /**
         * ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙ„ÙƒÙŠ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
         */
/*        function init() {
            console.log(`ğŸš€ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙ„ÙƒÙŠ Ø§Ù„Ù…Ø¹ÙŠØ§Ø±ÙŠ ${SYSTEM.VERSION}`);
            console.log(`ğŸ§­ Ù†ØµÙ Ø§Ù„ÙƒØ±Ø©: ${currentHemisphere === 'north' ? 'Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ' : 'Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠ'}`);
            console.log(`ğŸ“ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: ${currentLatitude}Â°`);
            
            // ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø§ØµØ± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            initUIElements();
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ù‡Ø¯ Three.js
            createThreeJSScene();
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª
            setupCoordinateSystem();
            
            // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø§Ù„ÙÙ„ÙƒÙŠ
            buildAstronomicalScene();
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ…
            setupControls();
            
            // Ø¨Ø¯Ø¡ Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ­Ø±Ùƒ
            startAnimationLoop();
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
            setupEventListeners();
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…
            runSystemTests();
            
            // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ÙŠØ©
            showNotification('ğŸŒŒ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙ„ÙƒÙŠ Ø§Ù„Ù…Ø¹ÙŠØ§Ø±ÙŠ V4.0 Ø¬Ø§Ù‡Ø²', 'ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­', 'success');
            
            console.log('âœ… ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­');
        }
*/
// ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© ÙÙŠ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
let astroBridge, starsRenderer, solarSystem;

// ÙÙŠ Ø¯Ø§Ù„Ø© init() - ØªØ­Ø¯ÙŠØ«
async function init() {
    console.log(`ğŸš€ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙ„ÙƒÙŠ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ V5.0`);
    
    // 1. ØªÙ‡ÙŠØ¦Ø© ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    initUIElements();
    
    // 2. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø³Ø± Ø§Ù„ÙÙ„ÙƒÙŠ
    astroBridge = new AstronomicalBridge();
    
    // 3. Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ù‡Ø¯ Three.js
    createThreeJSScene();
    
    // 4. Ø¥Ø¹Ø¯Ø§Ø¯ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª
    setupCoordinateSystem();
    
    // 5. Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø§Ù„ÙÙ„ÙƒÙŠ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
    buildAstronomicalScene();
    
    // 6. ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
    starsRenderer = new RealStarsRenderer(scene, astroBridge);
    await starsRenderer.initialize();
    
    // 7. ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©
    solarSystem = new SolarSystemRenderer(scene, astroBridge);
    await solarSystem.initialize();
    
    // 8. Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ…
    setupControls();
    
    // 9. Ø¨Ø¯Ø¡ Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ­Ø±Ùƒ
    startAnimationLoop();
    
    // 10. Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    setupEventListeners();
    
    // 11. Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…
    runSystemTests();
    
    // 12. Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ÙŠØ©
    showNotification('ğŸŒŒ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙ„ÙƒÙŠ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ V5.0 Ø¬Ø§Ù‡Ø²', 'ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¬ÙˆÙ… ÙˆØ§Ù„ÙƒÙˆØ§ÙƒØ¨ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©', 'success');
    
    console.log('âœ… ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­');
}

        /**
         * ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø§ØµØ± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
         */
        function initUIElements() {
            hudPanel = document.getElementById('hudPanel');
            controlsPanel = document.getElementById('controlsPanel');
            shortcutsWindow = document.getElementById('shortcutsWindow');
            notificationCenter = document.getElementById('notificationCenter');
            debugPanel = document.getElementById('debugPanel');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®
            updateDateTime();
            setInterval(updateDateTime, 1000);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù…
            updateSystemUsage();
            setInterval(updateSystemUsage, 5000);
        }

        /**
         * Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ù‡Ø¯ Three.js
         */
        function createThreeJSScene() {
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ù‡Ø¯
            scene = new THREE.Scene();
            scene.background = new THREE.Color(SYSTEM.COLOR_PALETTE.SKY);
            scene.fog = new THREE.Fog(SYSTEM.COLOR_PALETTE.SKY, 100, 500);
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
            camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 5000);
            camera.position.set(0, 150, -350);  // Ø§Ù„Ø¬Ù†ÙˆØ¨ (z Ù…ÙˆØ¬Ø¨)
            camera.lookAt(0, 0, 0);            // Ø§Ù„Ø´Ù…Ø§Ù„ (z Ø³Ø§Ù„Ø¨)
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…ÙØ¹Ø±Ø¶
            const canvas = document.getElementById('threeCanvas');
            renderer = new THREE.WebGLRenderer({ 
                canvas: canvas,
                antialias: true, 
                alpha: true,
                logarithmicDepthBuffer: true,
                powerPreference: "high-performance"
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1;
            
            // Ø¥Ø¶Ø§ÙØ© ØªØ­ÙƒÙ… Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.rotateSpeed = 0.8;
            controls.maxDistance = 1000;
            controls.minDistance = 10;
            controls.maxPolarAngle = Math.PI;
            controls.minPolarAngle = 0;
            
            // ØªÙ‚ÙŠÙŠØ¯ Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ø£ÙÙ‚ÙŠØ© Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø¸ÙˆØ± Ø§Ù„ÙÙ„ÙƒÙŠ
           // controls.minAzimuthAngle = -Math.PI * 0.5;
          //  controls.maxAzimuthAngle = Math.PI * 0.5;
        }

        /**
         * Ø¥Ø¹Ø¯Ø§Ø¯ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª
         */
        function setupCoordinateSystem() {
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶
            document.getElementById('hudLat').textContent = `${currentLatitude.toFixed(2)}Â° Ø´Ù…Ø§Ù„`;
            document.getElementById('hudHemisphere').textContent = 'Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ';
            
            // ØªØ­Ø¯ÙŠØ« Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ù‚Ø·Ø¨ÙŠ
            const polarAngle = 90 - currentLatitude;
            document.getElementById('hudPolarAngle').textContent = `${polarAngle.toFixed(2)}Â°`;
        }

        /**
         * Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø§Ù„ÙÙ„ÙƒÙŠ
         */
        function buildAstronomicalScene() {
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø©
            setupLighting();
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚Ø¨Ø© Ø§Ù„Ø³Ù…Ø§ÙˆÙŠØ©
            createCelestialSphere();
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø¬ÙˆÙ…
            createStars();
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆÙƒØ¨Ø§Øª
            createConstellations();
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒØ§Øª Ø§Ù„ÙÙ„ÙƒÙŠØ©
            createGrids();
            
            // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø£Ø±Ø¶ ÙˆØ§Ù„Ø£ÙÙ‚
            buildGroundAndHorizon();
            
            // Ø¨Ù†Ø§Ø¡ Ø­Ø§Ù…Ù„ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨
           // buildTelescopeMount();
			// Ø¨Ù†Ø§Ø¡ Ø­Ø§Ù…Ù„ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ Ø§Ù„Ø´ÙˆÙƒÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯
			createTelescopeStructure();

            enhanceTelescopeLighting();
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ù‚Ø§Ø· Ø§Ù„Ø§ØªØ¬Ø§Ù‡
            createCardinalPoints();
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚Ø·Ø¨ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠ
            createNorthCelestialPole();
        }

		/**
		 * ØªØ­Ø³ÙŠÙ† Ø¥Ø¶Ø§Ø¡Ø© Ø§Ù„Ù…Ø´Ù‡Ø¯ Ù„Ø¥Ø¨Ø±Ø§Ø² ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨
		 */
		function enhanceTelescopeLighting() {
			// Ø¥Ø¶Ø§Ø¡Ø© Ù…ÙˆØ¬Ù‡Ø© Ù†Ø­Ùˆ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨
			const telescopeLight = new THREE.SpotLight(0xffffff, 0.5);
			telescopeLight.position.set(5, 5, 5);
			telescopeLight.target = telescope;
			telescopeLight.angle = Math.PI / 4;
			telescopeLight.penumbra = 0.1;
			telescopeLight.decay = 2;
			telescopeLight.distance = 50;
			telescopeLight.castShadow = true;
			telescopeLight.shadow.mapSize.width = 1024;
			telescopeLight.shadow.mapSize.height = 1024;
			scene.add(telescopeLight);
			
			// Ø¥Ø¶Ø§Ø¡Ø© Ø®Ù„ÙÙŠØ© Ù„Ù„ØªÙ„Ø³ÙƒÙˆØ¨
			const backLight = new THREE.PointLight(0x00f2ff, 0.3);
			backLight.position.set(-5, 2, -5);
			scene.add(backLight);
			
			// Ø¥Ø¶Ø§Ø¡Ø© ØªÙØµÙŠÙ„ÙŠØ© Ù„Ù„Ù…Ø­Ø§ÙˆØ±
			const axisLight = new THREE.PointLight(0xf0883e, 0.2);
			axisLight.position.set(0, 2, 0);
			scene.add(axisLight);
			
			console.log('ğŸ’¡ ØªØ­Ø³ÙŠÙ† Ø¥Ø¶Ø§Ø¡Ø© Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ Ù„Ø¥Ø¨Ø±Ø§Ø² Ø§Ù„ØªÙØ§ØµÙŠÙ„');
		}

		/**
		 * ØªÙØ¹ÙŠÙ„/Ø¥Ù„ØºØ§Ø¡ Ø¸Ù„Ø§Ù„ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ Ù„Ù„Ø£Ø¯Ø§Ø¡
		 */
		function toggleTelescopeShadows(enable) {
			const objects = [polarFrame, raShaft, decAxis, telescope];
			
			objects.forEach(obj => {
				obj.traverse(child => {
					if (child.isMesh) {
						child.castShadow = enable;
						child.receiveShadow = enable;
					}
				});
			});
			
			console.log(`ğŸŒ“ Ø¸Ù„Ø§Ù„ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨: ${enable ? 'Ù…ÙØ¹Ù‘Ù„Ø©' : 'Ù…Ø¹Ø·Ù‘Ù„Ø©'}`);
		}

        /**
         * Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø©
         */
        function setupLighting() {
            // Ø¥Ø¶Ø§Ø¡Ø© Ù…Ø­ÙŠØ·Ø©
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
            scene.add(ambientLight);
            
            // Ø¥Ø¶Ø§Ø¡Ø© Ø§ØªØ¬Ø§Ù‡ÙŠØ© (Ø§Ù„Ø´Ù…Ø³)
            const sunLight = new THREE.DirectionalLight(0xffffff, 0.8);
            sunLight.position.set(100, 100, 100);
            sunLight.castShadow = true;
            sunLight.shadow.mapSize.width = 2048;
            sunLight.shadow.mapSize.height = 2048;
            scene.add(sunLight);
            
            // Ø¥Ø¶Ø§Ø¡Ø© Ø®Ù„ÙÙŠØ© (Ø§Ù„Ø³Ù…Ø§Ø¡)
            const skyLight = new THREE.HemisphereLight(0x4488ff, 0x002244, 0.2);
            scene.add(skyLight);
        }

        /**
         * Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚Ø¨Ø© Ø§Ù„Ø³Ù…Ø§ÙˆÙŠØ©
         */
        function createCelestialSphere() {
            celestialSphere = new THREE.Group();
            scene.add(celestialSphere);
            
            const geometry = new THREE.SphereGeometry(SYSTEM.SPHERE_RADIUS, 128, 128);
            const material = new THREE.MeshBasicMaterial({
                color: SYSTEM.COLOR_PALETTE.SKY,
                transparent: true,
                opacity: 0.15,
                side: THREE.BackSide,
                depthWrite: false
            });
            
            const sphere = new THREE.Mesh(geometry, material);
            celestialSphere.add(sphere);
            
            // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ù‚Ø¨Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„Ø²Ù…Ù† Ø§Ù„Ù†Ø¬Ù…ÙŠ
            updateCelestialSphereRotation();
        }

        /**
         * ØªØ­Ø¯ÙŠØ« Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ù‚Ø¨Ø© Ø§Ù„Ø³Ù…Ø§ÙˆÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„Ø²Ù…Ù† Ø§Ù„Ù†Ø¬Ù…ÙŠ
         */
        function updateCelestialSphereRotation() {
            // Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ù‚Ø·Ø¨ÙŠ
            const polarAngle = (90 - currentLatitude) * Math.PI / 180;
            
            // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ù‚Ø¨Ø© Ø­ÙˆÙ„ Ø§Ù„Ù…Ø­ÙˆØ± X Ø¨Ù…Ù‚Ø¯Ø§Ø± Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ÙˆØ±
            celestialSphere.rotation.x = polarAngle;
            
            // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ù‚Ø¨Ø© Ø­ÙˆÙ„ Ø§Ù„Ù…Ø­ÙˆØ± Y Ø¨Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ù†Ø¬Ù…ÙŠ Ø§Ù„Ù…Ø­Ù„ÙŠ
            celestialSphere.rotation.y = -THREE.MathUtils.degToRad(localSiderealTime * 15);
            
            console.log(`ğŸ”„ Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ù‚Ø¨Ø©: Ø§Ù„Ù…ÙŠÙ„=${(90 - currentLatitude).toFixed(1)}Â°, LST=${localSiderealTime.toFixed(2)}h`);
        }

        /**
         * Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø¬ÙˆÙ…
         */
        function createStars() {
            const starCount = 2000;
            const geometry = new THREE.BufferGeometry();
            const positions = new Float32Array(starCount * 3);
            const colors = new Float32Array(starCount * 3);
            const sizes = new Float32Array(starCount);
            
            for (let i = 0; i < starCount; i++) {
                // ØªÙˆØ²ÙŠØ¹ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„Ù„Ù†Ø¬ÙˆÙ…
                const azimuth = Math.random() * 360;
                const altitude = Math.acos(2 * Math.random() - 1) * 180 / Math.PI;
                
                const pos = ASTRONOMICAL_SYSTEM.sphericalToCartesian(azimuth, altitude);
                
                positions[i * 3] = pos.x;
                positions[i * 3 + 1] = pos.y;
                positions[i * 3 + 2] = pos.z;
                
                // Ø£Ù„ÙˆØ§Ù† Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© (Ù…Ø¹ Ù…ÙŠÙ„ Ù„Ù„Ø£Ø²Ø±Ù‚ ÙˆØ§Ù„Ø£Ø¨ÙŠØ¶)
                const color = new THREE.Color();
                const hue = Math.random() * 0.2 + 0.6; // Ø£Ø²Ø±Ù‚ Ø¥Ù„Ù‰ Ø£Ø¨ÙŠØ¶
                const saturation = Math.random() * 0.3 + 0.7;
                const lightness = Math.random() * 0.3 + 0.7;
                color.setHSL(hue, saturation, lightness);
                
                colors[i * 3] = color.r;
                colors[i * 3 + 1] = color.g;
                colors[i * 3 + 2] = color.b;
                
                // Ø£Ø­Ø¬Ø§Ù… Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
                sizes[i] = Math.random() * 2 + 0.5;
            }
            
            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));
            
            const material = new THREE.PointsMaterial({
                size: 1.5,
                vertexColors: true,
                transparent: true,
                opacity: 0.8,
                sizeAttenuation: true
            });
            
            stars = new THREE.Points(geometry, material);
            celestialSphere.add(stars);
        }

        /**
         * Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆÙƒØ¨Ø§Øª
         */
        function createConstellations() {
            constellations = new THREE.Group();
            celestialSphere.add(constellations);
            
            // ÙƒÙˆÙƒØ¨Ø© Ø§Ù„Ø¯Ø¨ Ø§Ù„Ø£ÙƒØ¨Ø± (Ù…Ø«Ø§Ù„)
            const ursaMajorStars = [
                { az: 165, alt: 55 },  // Dubhe
                { az: 160, alt: 57 },  // Merak
                { az: 158, alt: 60 },  // Phecda
                { az: 153, alt: 62 },  // Megrez
                { az: 145, alt: 63 },  // Alioth
                { az: 140, alt: 62 },  // Mizar
                { az: 137, alt: 60 }   // Alkaid
            ];
            
            const points = [];
            ursaMajorStars.forEach(star => {
                const pos = ASTRONOMICAL_SYSTEM.sphericalToCartesian(star.az, star.alt);
                points.push(new THREE.Vector3(pos.x, pos.y, pos.z));
            });
            
            const geometry = new THREE.BufferGeometry().setFromPoints(points);
            const material = new THREE.LineBasicMaterial({
                color: 0x4488ff,
                transparent: true,
                opacity: 0.5,
                linewidth: 2
            });
            
            const constellationLine = new THREE.Line(geometry, material);
            constellations.add(constellationLine);
        }

        /**
         * Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒØ§Øª Ø§Ù„ÙÙ„ÙƒÙŠØ©
         */
        function createGrids() {
            // Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©
            equatorialGrid = new THREE.Group();
            equatorialGrid.name = 'equatorialGrid';
            
            // Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø³Ù…ØªÙŠØ©
            horizontalGrid = new THREE.Group();
            horizontalGrid.name = 'horizontalGrid';
            
            // Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¨Ø±ÙˆØ¬
            eclipticGrid = new THREE.Group();
            eclipticGrid.name = 'eclipticGrid';
            
            scene.add(equatorialGrid);
            scene.add(horizontalGrid);
            scene.add(eclipticGrid);
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒØ§Øª
            createEquatorialGrid();
            createHorizontalGrid();
            createEclipticGrid();
            
            // ØªØ­Ø¯ÙŠØ« Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø´Ø¨ÙƒØ§Øª
            updateGridVisibility();
        }

        /**
         * Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©
         */
        function createEquatorialGrid() {
            // Ù…Ø³Ø­ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            while (equatorialGrid.children.length > 0) {
                equatorialGrid.remove(equatorialGrid.children[0]);
            }
            
            const density = SYSTEM.GRID_DENSITY_LEVELS[gridDensity];
            const color = new THREE.Color(SYSTEM.COLOR_PALETTE.GRID_EQUATORIAL);
            
            // Ø®Ø·ÙˆØ· Ø§Ù„Ù…ÙŠÙ„ (Declination)
            for (let dec = -75; dec <= 75; dec += density.dec) {
                if (dec === 0) continue; // Ø®Ø· Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¡ Ø³ÙŠØ¶Ø§Ù Ù„Ø§Ø­Ù‚Ø§Ù‹
                
                const decRad = dec * Math.PI / 180;
                const radius = Math.cos(decRad) * SYSTEM.SPHERE_RADIUS;
                const y = Math.sin(decRad) * SYSTEM.SPHERE_RADIUS;
                
                const points = [];
                for (let i = 0; i <= 64; i++) {
                    const angle = (i / 64) * Math.PI * 2;
                    points.push(new THREE.Vector3(
                        radius * Math.cos(angle),
                        y,
                        radius * Math.sin(angle)
                    ));
                }
                
                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const material = new THREE.LineBasicMaterial({
                    color: color,
                    transparent: true,
                    opacity: gridAlpha,
                    linewidth: 1
                });
                
                equatorialGrid.add(new THREE.Line(geometry, material));
            }
            
            // Ø®Ø·ÙˆØ· Ø§Ù„Ù…Ø·Ù„Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… (RA)
            for (let ra = 0; ra < 360; ra += density.ra) {
                const raRad = ra * Math.PI / 180;
                const points = [];
                
                for (let dec = -85; dec <= 85; dec += 5) {
                    const decRad = dec * Math.PI / 180;
                    const cosDec = Math.cos(decRad);
                    const sinDec = Math.sin(decRad);
                    
                    points.push(new THREE.Vector3(
                        SYSTEM.SPHERE_RADIUS * cosDec * Math.cos(raRad),
                        SYSTEM.SPHERE_RADIUS * sinDec,
                        SYSTEM.SPHERE_RADIUS * cosDec * Math.sin(raRad)
                    ));
                }
                
                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const material = new THREE.LineBasicMaterial({
                    color: color,
                    transparent: true,
                    opacity: gridAlpha,
                    linewidth: 1
                });
                
                equatorialGrid.add(new THREE.Line(geometry, material));
            }
            
            // Ø®Ø· Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¡ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠ (Ù…Ù…ÙŠØ²)
            const equatorPoints = [];
            for (let i = 0; i <= 64; i++) {
                const angle = (i / 64) * Math.PI * 2;
                equatorPoints.push(new THREE.Vector3(
                    SYSTEM.SPHERE_RADIUS * Math.cos(angle),
                    0,
                    SYSTEM.SPHERE_RADIUS * Math.sin(angle)
                ));
            }
            
            const equatorGeometry = new THREE.BufferGeometry().setFromPoints(equatorPoints);
            const equatorMaterial = new THREE.LineBasicMaterial({
                color: 0xff9800,
                transparent: true,
                opacity: gridAlpha * 1.5,
                linewidth: 2
            });
            
            equatorialGrid.add(new THREE.Line(equatorGeometry, equatorMaterial));
            
            // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø´Ø¨ÙƒØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„Ø²Ù…Ù† Ø§Ù„Ù†Ø¬Ù…ÙŠ
            updateEquatorialGridRotation();
        }

        /**
         * ØªØ­Ø¯ÙŠØ« Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©
         */
        function updateEquatorialGridRotation() {
            // Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ù‚Ø·Ø¨ÙŠ
            const polarAngle = (90 - currentLatitude) * Math.PI / 180;
            
            // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø´Ø¨ÙƒØ© Ø­ÙˆÙ„ Ø§Ù„Ù…Ø­ÙˆØ± X Ø¨Ù…Ù‚Ø¯Ø§Ø± Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ÙˆØ±
            equatorialGrid.rotation.x = polarAngle;
            
            // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø´Ø¨ÙƒØ© Ø­ÙˆÙ„ Ø§Ù„Ù…Ø­ÙˆØ± Y Ø¨Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ù†Ø¬Ù…ÙŠ Ø§Ù„Ù…Ø­Ù„ÙŠ
            equatorialGrid.rotation.y = -THREE.MathUtils.degToRad(localSiderealTime * 15); // Ø³Ø§Ù„Ø¨ Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§ØªØ¬Ø§Ù‡ Ø¯ÙˆØ±Ø§Ù† ØµØ­ÙŠØ­
            
            console.log(`ğŸ“ Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©: Ø§Ù„Ù…ÙŠÙ„=${(90 - currentLatitude).toFixed(1)}Â°, LST=${localSiderealTime.toFixed(2)}h`);
        }

        /**
         * Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø³Ù…ØªÙŠØ©
         */
        function createHorizontalGrid() {
            // Ù…Ø³Ø­ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            while (horizontalGrid.children.length > 0) {
                horizontalGrid.remove(horizontalGrid.children[0]);
            }
            
            const density = SYSTEM.GRID_DENSITY_LEVELS[gridDensity];
            const color = new THREE.Color(SYSTEM.COLOR_PALETTE.GRID_HORIZONTAL);
            
            // Ø®Ø·ÙˆØ· Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ (Altitude)
            for (let alt = density.alt; alt <= 90; alt += density.alt) {
                const altRad = alt * Math.PI / 180;
                const radius = Math.cos(altRad) * SYSTEM.SPHERE_RADIUS;
                const y = Math.sin(altRad) * SYSTEM.SPHERE_RADIUS;
                
                const points = [];
                for (let i = 0; i <= 64; i++) {
                    const angle = (i / 64) * Math.PI * 2;
                    points.push(new THREE.Vector3(
                        radius * Math.cos(angle),
                        y,
                        radius * Math.sin(angle)
                    ));
                }
                
                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const material = new THREE.LineBasicMaterial({
                    color: color,
                    transparent: true,
                    opacity: gridAlpha,
                    linewidth: 1
                });
                
                horizontalGrid.add(new THREE.Line(geometry, material));
            }
            
            // Ø®Ø·ÙˆØ· Ø§Ù„Ø³Ù…Øª (Azimuth)
            for (let az = 0; az < 360; az += density.az) {
                const points = [];
                
                for (let alt = 0; alt <= 90; alt += 5) {
                    const pos = ASTRONOMICAL_SYSTEM.sphericalToCartesian(az, alt);
                    points.push(new THREE.Vector3(pos.x, pos.y, pos.z));
                }
                
                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const material = new THREE.LineBasicMaterial({
                    color: color,
                    transparent: true,
                    opacity: gridAlpha,
                    linewidth: 1
                });
                
                horizontalGrid.add(new THREE.Line(geometry, material));
            }
            
            // Ø®Ø· Ø§Ù„Ø£ÙÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
            const horizonPoints = [];
            for (let i = 0; i <= 64; i++) {
                const angle = (i / 64) * Math.PI * 2;
                horizonPoints.push(new THREE.Vector3(
                    SYSTEM.SPHERE_RADIUS * Math.cos(angle),
                    0,
                    SYSTEM.SPHERE_RADIUS * Math.sin(angle)
                ));
            }
            
            const horizonGeometry = new THREE.BufferGeometry().setFromPoints(horizonPoints);
            const horizonMaterial = new THREE.LineBasicMaterial({
                color: 0x58a6ff,
                transparent: true,
                opacity: gridAlpha * 1.5,
                linewidth: 2
            });
            
            horizontalGrid.add(new THREE.Line(horizonGeometry, horizonMaterial));
        }

        /**
         * Ø¥Ù†Ø´Ø§Ø¡ Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¨Ø±ÙˆØ¬
         */
        function createEclipticGrid() {
            while (eclipticGrid.children.length > 0) {
                eclipticGrid.remove(eclipticGrid.children[0]);
            }
            
            const color = new THREE.Color(SYSTEM.COLOR_PALETTE.GRID_ECLIPTIC);
            const points = [];
            const inclination = 23.5 * Math.PI / 180;
            
            // Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¨Ø±ÙˆØ¬
            for (let i = 0; i <= 64; i++) {
                const angle = (i / 64) * Math.PI * 2;
                const x = SYSTEM.SPHERE_RADIUS * Math.cos(angle);
                const y = SYSTEM.SPHERE_RADIUS * Math.sin(angle) * Math.sin(inclination);
                const z = SYSTEM.SPHERE_RADIUS * Math.sin(angle) * Math.cos(inclination);
                
                points.push(new THREE.Vector3(x, y, z));
            }
            
            const geometry = new THREE.BufferGeometry().setFromPoints(points);
            const material = new THREE.LineBasicMaterial({
                color: color,
                transparent: true,
                opacity: gridAlpha * 0.8,
                linewidth: 1.5
            });
            
            eclipticGrid.add(new THREE.Line(geometry, material));
            
            // ØªØ¯ÙˆÙŠØ± Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¨Ø±ÙˆØ¬ Ù…Ø¹ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©
            const polarAngle = (90 - currentLatitude) * Math.PI / 180;
            eclipticGrid.rotation.x = polarAngle;
            eclipticGrid.rotation.y = THREE.MathUtils.degToRad(localSiderealTime * 15);
        }

        /**
         * Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø£Ø±Ø¶ ÙˆØ§Ù„Ø£ÙÙ‚
         */
        function buildGroundAndHorizon() {
            // Ø§Ù„Ø£Ø±Ø¶
            const groundGeometry = new THREE.CircleGeometry(SYSTEM.SPHERE_RADIUS, 64);
            const groundMaterial = new THREE.MeshStandardMaterial({
                color: SYSTEM.COLOR_PALETTE.GROUND,
                transparent: true,
                opacity: 0.7,
                side: THREE.DoubleSide,
                depthWrite: false,
                roughness: 0.8,
                metalness: 0.2
            });
            
            ground = new THREE.Mesh(groundGeometry, groundMaterial);
            ground.rotation.x = -Math.PI / 2;
            ground.position.y = -0.1;
            scene.add(ground);

            // Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø£ÙÙ‚
            const horizonGeometry = new THREE.RingGeometry(SYSTEM.SPHERE_RADIUS - 1, SYSTEM.SPHERE_RADIUS, 64);
            const horizonMaterial = new THREE.MeshBasicMaterial({
                color: 0x58a6ff,
                transparent: true,
                opacity: 0.3,
                side: THREE.DoubleSide
            });
            
            horizonCircle = new THREE.Mesh(horizonGeometry, horizonMaterial);
            horizonCircle.rotation.x = -Math.PI / 2;
            scene.add(horizonCircle);
        }
		
		/**
 * Ø¥Ù†Ø´Ø§Ø¡ Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ Ø§Ù„Ø´ÙˆÙƒÙŠ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ (Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ù…ØµØ­Ø­)
 */
function createTelescopeStructure() {
    console.log('ğŸ”­ Ø¨Ù†Ø§Ø¡ Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ Ø§Ù„Ø´ÙˆÙƒÙŠ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ...');
    
    // ==================== Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ù‚Ø·Ø¨ÙŠ ====================
    polarFrame = new THREE.Group();
    polarFrame.name = 'polarFrame';
    scene.add(polarFrame);
    
    // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ù‚Ø·Ø¨ÙŠ Ø¨Ù…Ù‚Ø¯Ø§Ø± Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ù‚Ø·Ø¨ÙŠ
    const polarAngle = (90 - currentLatitude) * Math.PI / 180;
    polarFrame.rotation.x = polarAngle;
    console.log(`ğŸ¯ Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ù‚Ø·Ø¨ÙŠ: ${(90 - currentLatitude).toFixed(1)}Â° Ø­ÙˆÙ„ Ø§Ù„Ù…Ø­ÙˆØ± X`);
    
    // ==================== Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© ====================
    const baseGeometry = new THREE.CylinderGeometry(0.8, 1, 0.4, 32);
    const baseMaterial = new THREE.MeshStandardMaterial({
        color: 0x0d1117,
        metalness: 0.8,
        roughness: 0.2,
        emissive: 0x000000,
        emissiveIntensity: 0.1
    });
    const base = new THREE.Mesh(baseGeometry, baseMaterial);
    base.position.y = 0.2;
    base.castShadow = true;
    base.receiveShadow = true;
    scene.add(base);
    
    // ==================== Ù…Ø­ÙˆØ± Ø§Ù„Ù…Ø·Ù„Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… (RA) ====================
    raShaft = new THREE.Group();
    raShaft.name = 'raShaft';
    polarFrame.add(raShaft);
    
    // Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ø¹Ù…ÙˆØ¯ Ø±Ø£Ø³ÙŠ)
    const shaftGeometry = new THREE.CylinderGeometry(0.15, 0.15, 3, 32);
    const shaftMaterial = new THREE.MeshStandardMaterial({
        color: 0x238636,
        metalness: 0.9,
        roughness: 0.1,
        emissive: 0x0a3d0a,
        emissiveIntensity: 0.2
    });
    const shaft = new THREE.Mesh(shaftGeometry, shaftMaterial);
    shaft.position.y = 1.5;
    shaft.castShadow = true;
    raShaft.add(shaft);
    
    // ==================== Ø§Ù„Ø´ÙˆÙƒØ© ====================
    const fork = new THREE.Group();
    fork.name = 'fork';
    fork.position.y = 3; // ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
    raShaft.add(fork);
    
    const forkMaterial = new THREE.MeshStandardMaterial({
        color: 0x8b949e,
        metalness: 0.6,
        roughness: 0.3
    });
    
    // Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø´ÙˆÙƒØ©
    const forkBaseGeometry = new THREE.BoxGeometry(2.2, 0.4, 0.7);
    const forkBase = new THREE.Mesh(forkBaseGeometry, forkMaterial);
    forkBase.castShadow = true;
    fork.add(forkBase);
    
    // Ø§Ù„Ø°Ø±Ø§Ø¹ Ø§Ù„ÙŠØ³Ø±Ù‰
    const armGeometry = new THREE.BoxGeometry(0.3, 2, 0.6);
    const leftArm = new THREE.Mesh(armGeometry, forkMaterial);
    leftArm.position.set(-1, 0.9, 0);
    leftArm.castShadow = true;
    fork.add(leftArm);
    
    // Ø§Ù„Ø°Ø±Ø§Ø¹ Ø§Ù„ÙŠÙ…Ù†Ù‰ (Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„ÙŠØ³Ø±Ù‰)
    const rightArm = leftArm.clone();
    rightArm.position.set(1, 0.9, 0);
    rightArm.castShadow = true;
    fork.add(rightArm);
    
    // Ù…Ø­ÙˆØ± Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ø´ÙˆÙƒØ© (Ù…Ø­ÙˆØ± RA)
    const forkAxisGeometry = new THREE.CylinderGeometry(0.08, 0.08, 0.5, 16);
    const forkAxisMaterial = new THREE.MeshStandardMaterial({
        color: 0xf0883e,
        metalness: 0.8,
        roughness: 0.2
    });
    const forkAxis = new THREE.Mesh(forkAxisGeometry, forkAxisMaterial);
    forkAxis.position.y = 1.9;
    forkAxis.rotation.x = Math.PI / 2;
    fork.add(forkAxis);
    
    // ==================== Ù…Ø­ÙˆØ± Ø§Ù„Ù…ÙŠÙ„ (Dec) ====================
    decAxis = new THREE.Group();
    decAxis.name = 'decAxis';
    decAxis.position.y = 1.0; // Ø¹Ù„Ù‰ Ù†ÙØ³ Ø§Ø±ØªÙØ§Ø¹ Ù…Ø­ÙˆØ± Ø§Ù„Ø´ÙˆÙƒØ©
    fork.add(decAxis);
    
    // Ù…Ø­ÙˆØ± Ø§Ù„Ù…ÙŠÙ„ (Ø¹Ù…ÙˆØ¯ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø´ÙˆÙƒØ©)
    const decShaftGeometry = new THREE.CylinderGeometry(0.1, 0.1, 0.4, 16);
    const decShaftMaterial = new THREE.MeshStandardMaterial({
        color: 0x58a6ff,
        metalness: 0.7,
        roughness: 0.3
    });
    const decShaft = new THREE.Mesh(decShaftGeometry, decShaftMaterial);
    decShaft.position.y = 0;
    decShaft.rotation.x = Math.PI / 2; // Ø£ÙÙ‚ÙŠ
    decAxis.add(decShaft);
    
    // ==================== Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ ====================
    telescope = new THREE.Group();
    telescope.name = 'telescope';
    telescope.position.z = 0.2; // Ø¥Ø¨Ø¹Ø§Ø¯ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ø¹Ù† Ø§Ù„Ù…Ø­ÙˆØ±
    decAxis.add(telescope);
    
    // Ø§Ù„Ø£Ù†Ø¨ÙˆØ¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„ØªÙ„Ø³ÙƒÙˆØ¨
    const tubeGeometry = new THREE.CylinderGeometry(0.45, 0.45, 2.6, 64);
    const tubeMaterial = new THREE.MeshStandardMaterial({
        color: 0xf0f6fc,
        metalness: 0.2,
        roughness: 0.1,
        envMapIntensity: 0.5
    });
    const mainTube = new THREE.Mesh(tubeGeometry, tubeMaterial);
    mainTube.rotation.x = Math.PI / 2; // ØªÙˆØ¬ÙŠÙ‡ Ø£ÙÙ‚ÙŠ
    mainTube.position.z = 1.3; // Ù…Ø±ÙƒØ² Ø§Ù„Ø£Ù†Ø¨ÙˆØ¨
    mainTube.castShadow = true;
    telescope.add(mainTube);
    
    // Ø·Ù„Ø§Ø¡ ÙØªØ­Ø© Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ (Ø­Ù„Ù‚Ø§Øª)
    const apertureGeometry = new THREE.CylinderGeometry(0.48, 0.48, 0.1, 32);
    const apertureMaterial = new THREE.MeshStandardMaterial({
        color: 0x010409,
        metalness: 0.8,
        roughness: 0.2
    });
    const aperture = new THREE.Mesh(apertureGeometry, apertureMaterial);
    aperture.rotation.x = Math.PI / 2;
    aperture.position.z = 2.55; // ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø£Ù†Ø¨ÙˆØ¨
    telescope.add(aperture);
    
    // Ø®Ù„ÙŠØ© Ø§Ù„Ù…Ø±Ø¢Ø© (ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨)
    const mirrorCellGeometry = new THREE.CylinderGeometry(0.48, 0.48, 0.5, 32);
    const mirrorCellMaterial = new THREE.MeshStandardMaterial({
        color: 0x010409,
        metalness: 0.5,
        roughness: 0.8
    });
    const mirrorCell = new THREE.Mesh(mirrorCellGeometry, mirrorCellMaterial);
    mirrorCell.rotation.x = Math.PI / 2;
    mirrorCell.position.z = -1.1; // ÙÙŠ Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø¢Ø®Ø± Ù…Ù† Ø§Ù„Ø£Ù†Ø¨ÙˆØ¨
    mirrorCell.castShadow = true;
    telescope.add(mirrorCell);
    
    // Ø­ÙˆØ§Ù…Ù„ Ø§Ù„Ø¯Ø¹Ù… (Ø¯Ø¹Ø§Ù…Ø§Øª)
    const supportGeometry = new THREE.BoxGeometry(0.08, 0.3, 0.08);
    const supportMaterial = new THREE.MeshStandardMaterial({
        color: 0x30363d,
        metalness: 0.6,
        roughness: 0.4
    });
    
    for (let i = 0; i < 3; i++) {
        const angle = (i / 3) * Math.PI * 2;
        const support = new THREE.Mesh(supportGeometry, supportMaterial);
        support.position.set(
            Math.cos(angle) * 0.4,
            0.15,
            Math.sin(angle) * 0.4
        );
        support.rotation.y = angle;
        mainTube.add(support);
    }
    
    // ==================== Ø´Ø¹Ø§Ø¹ Ø§Ù„Ù„ÙŠØ²Ø± ====================
    const laserGeometry = new THREE.BufferGeometry().setFromPoints([
        new THREE.Vector3(0, 0, 0),
        new THREE.Vector3(0, 0, SYSTEM.SPHERE_RADIUS * 1.1) // Ø£Ø·ÙˆÙ„ Ù„Ù„Ø±Ø¤ÙŠØ©
    ]);
    const laserMaterial = new THREE.LineBasicMaterial({
        color: 0xff0000,
        transparent: true,
        opacity: 0, // Ù…Ø®ÙÙŠ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
        linewidth: 5,
        depthTest: false
    });
    laserBeam = new THREE.Line(laserGeometry, laserMaterial);
    laserBeam.position.z = 2.5; // Ù…Ù† Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨
    laserBeam.name = 'laserBeam';
    telescope.add(laserBeam);
    
    // Ù…Ø¤Ø´Ø± Ø§Ù„Ù„ÙŠØ²Ø± (Ù†Ù‚Ø·Ø© Ø¶ÙˆØ¡ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©)
    const laserIndicatorGeometry = new THREE.SphereGeometry(0.15, 16, 16);
    const laserIndicatorMaterial = new THREE.MeshBasicMaterial({
        color: 0xff0000,
        transparent: true,
        opacity: 0
    });
    const laserIndicator = new THREE.Mesh(laserIndicatorGeometry, laserIndicatorMaterial);
    laserIndicator.position.z = 0;
    laserBeam.add(laserIndicator);
    
    // ==================== ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© ====================
    
    // Ø¹Ø¬Ù„Ø§Øª Ø§Ù„ØªØ­ÙƒÙ…
    const controlWheelGeometry = new THREE.TorusGeometry(0.25, 0.05, 16, 32);
    const controlWheelMaterial = new THREE.MeshStandardMaterial({
        color: 0xf0883e,
        metalness: 0.7,
        roughness: 0.3
    });
    
    // Ø¹Ø¬Ù„Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ù…Ø­ÙˆØ± RA
    const raWheel = new THREE.Mesh(controlWheelGeometry, controlWheelMaterial);
    raWheel.position.set(0, 0.5, -0.5);
    raWheel.rotation.x = Math.PI / 2;
    raShaft.add(raWheel);
    
    // Ø¹Ø¬Ù„Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ù…Ø­ÙˆØ± Dec
    const decWheel = raWheel.clone();
    decWheel.position.set(0, 0, -0.3);
    decWheel.rotation.y = Math.PI / 2;
    decAxis.add(decWheel);
    
    // Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… ØµØºÙŠØ±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©
    const controlPanelGeometry = new THREE.BoxGeometry(0.6, 0.1, 0.4);
    const controlPanelMaterial = new THREE.MeshStandardMaterial({
        color: 0x161b22,
        metalness: 0.9,
        roughness: 0.1,
        emissive: 0x00f2ff,
        emissiveIntensity: 0.05
    });
    const controlPanel = new THREE.Mesh(controlPanelGeometry, controlPanelMaterial);
    controlPanel.position.set(0, 0.45, 0.5);
    base.add(controlPanel);
    
    // Ø£Ø²Ø±Ø§Ø± Ø¹Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
    const buttonGeometry = new THREE.CylinderGeometry(0.05, 0.05, 0.05, 16);
    const buttonMaterial = new THREE.MeshStandardMaterial({
        color: 0x238636,
        metalness: 0.8,
        roughness: 0.2
    });
    
    for (let i = 0; i < 3; i++) {
        const button = new THREE.Mesh(buttonGeometry, buttonMaterial);
        button.position.set(-0.15 + i * 0.15, 0.06, 0);
        controlPanel.add(button);
    }
    
    console.log('âœ… ØªÙ… Ø¨Ù†Ø§Ø¡ Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ Ø§Ù„Ø´ÙˆÙƒÙŠ Ø¨Ù†Ø¬Ø§Ø­');
    console.log(`ğŸ“ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª: polarFrame â†’ raShaft â†’ fork â†’ decAxis â†’ telescope`);
    
    // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
    testTelescopeMovement();
}

/**
 * Ø§Ø®ØªØ¨Ø§Ø± Ø­Ø±ÙƒØ© Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ Ø¨Ø¹Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡
 */
function testTelescopeMovement() {
    console.log('ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø­Ø±ÙƒØ© Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨...');
    
    // ØªØ­Ø±ÙŠÙƒ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø­Ø§ÙˆØ±
    setTimeout(() => {
        console.log('  ğŸ”„ ØªØ­Ø±ÙŠÙƒ Ù…Ø­ÙˆØ± RA...');
        raShaft.rotation.y += 0.1;
    }, 500);
    
    setTimeout(() => {
        console.log('  ğŸ”„ ØªØ­Ø±ÙŠÙƒ Ù…Ø­ÙˆØ± Dec...');
        decAxis.rotation.x += 0.1;
    }, 1000);
    
    setTimeout(() => {
        console.log('  ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†...');
        raShaft.rotation.y = 0;
        decAxis.rotation.x = 0;
        console.log('  âœ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­Ø±ÙƒØ© Ù…ÙƒØªÙ…Ù„');
    }, 1500);
}

        /**
         * Ø¨Ù†Ø§Ø¡ Ø­Ø§Ù…Ù„ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨
         */
        function buildTelescopeMount() {
            polarFrame = new THREE.Group();
            scene.add(polarFrame);
            
            // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ù‚Ø·Ø¨ÙŠ Ø­ÙˆÙ„ Ø§Ù„Ù…Ø­ÙˆØ± X Ø¨Ù…Ù‚Ø¯Ø§Ø± Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ÙˆØ±
            const polarAngle = (90 - currentLatitude) * Math.PI / 180;
            polarFrame.rotation.x = polarAngle;

            // Ù…Ø­ÙˆØ± RA (Ø§Ù„Ù…Ø·Ù„Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…)
            raShaft = new THREE.Group();
            polarFrame.add(raShaft);

            const shaftGeometry = new THREE.CylinderGeometry(0.2, 0.2, 4, 16);
            const shaftMaterial = new THREE.MeshStandardMaterial({
                color: 0x238636,
                metalness: 0.9,
                roughness: 0.1
            });
            const shaft = new THREE.Mesh(shaftGeometry, shaftMaterial);
            shaft.position.y = 2;
            raShaft.add(shaft);

            // Ù…Ø­ÙˆØ± Dec (Ø§Ù„Ù…ÙŠÙ„)
            decAxis = new THREE.Group();
            decAxis.position.y = 4;
            raShaft.add(decAxis);

            // Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨
            telescope = new THREE.Group();
            decAxis.add(telescope);

            const tubeGeometry = new THREE.CylinderGeometry(0.4, 0.4, 3, 32);
            const tubeMaterial = new THREE.MeshStandardMaterial({
                color: 0xf0f6fc,
                metalness: 0.2,
                roughness: 0.1
            });
            const mainTube = new THREE.Mesh(tubeGeometry, tubeMaterial);
            mainTube.rotation.x = Math.PI / 2;
            telescope.add(mainTube);

            // Ø´Ø¹Ø§Ø¹ Ø§Ù„Ù„ÙŠØ²Ø±
            const laserGeometry = new THREE.BufferGeometry().setFromPoints([
                new THREE.Vector3(0, 0, 0),
                new THREE.Vector3(0, 0, SYSTEM.SPHERE_RADIUS * 1.0)
            ]);
            const laserMaterial = new THREE.LineBasicMaterial({
                color: 0xff0000,
                transparent: true,
                opacity: 0,
                linewidth: 3
            });
            laserBeam = new THREE.Line(laserGeometry, laserMaterial);
            laserBeam.position.z = 1.0;
            telescope.add(laserBeam);
            
            console.log(`ğŸ”­ ØªÙ… Ø¨Ù†Ø§Ø¡ Ø­Ø§Ù…Ù„ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ Ù…Ø¹ Ù…ÙŠÙ„ Ù‚Ø·Ø¨ÙŠ: ${(90 - currentLatitude).toFixed(1)}Â°`);
        }

/**
 * ØªØ­Ø¯ÙŠØ« Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù‚Ø·Ø¨ Ù…Ø¹ ØªØºÙŠØ± Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ - Ù…Ø¹Ø¯Ù„Ø© Ù„Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø´ÙˆÙƒÙŠ
 */
function updatePolarAlignment() {
    const polarAngle = (90 - currentLatitude) * Math.PI / 180;
    
    // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ù‚Ø·Ø¨ÙŠ Ø­ÙˆÙ„ Ø§Ù„Ù…Ø­ÙˆØ± X Ø¨Ù…Ù‚Ø¯Ø§Ø± Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ÙˆØ±
    polarFrame.rotation.x = polarAngle;
    
    console.log(`ğŸ¯ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù‚Ø·Ø¨ÙŠØ©: Ø§Ù„Ù…ÙŠÙ„ = ${(90 - currentLatitude).toFixed(1)}Â° Ø­ÙˆÙ„ Ø§Ù„Ù…Ø­ÙˆØ± X`);
}

        /**
         * Ø¥Ù†Ø´Ø§Ø¡ Ù†Ù‚Ø§Ø· Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
         */
        function createCardinalPoints() {
            const directions = [
                { name: 'Ø´Ù…Ø§Ù„', az: 0, alt: 0, color: 0x00ff00 },
                { name: 'Ø´Ø±Ù‚', az: 90, alt: 0, color: 0xff0000 },
                { name: 'Ø¬Ù†ÙˆØ¨', az: 180, alt: 0, color: 0x0000ff },
                { name: 'ØºØ±Ø¨', az: 270, alt: 0, color: 0xffff00 }
            ];
            
            directions.forEach(dir => {
                const pos = ASTRONOMICAL_SYSTEM.sphericalToCartesian(dir.az, dir.alt);
                
                console.log(`ğŸ“ ${dir.name}: Ø§Ù„Ø³Ù…Øª=${dir.az}Â°, Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª: x=${pos.x.toFixed(1)}, y=${pos.y.toFixed(1)}, z=${pos.z.toFixed(1)}`);
                
                const geometry = new THREE.SphereGeometry(5, 16, 16);
                const material = new THREE.MeshBasicMaterial({ 
                    color: dir.color,
                    transparent: true,
                    opacity: 0.5
                });
                
                const point = new THREE.Mesh(geometry, material);
                point.position.set(pos.x, pos.y, pos.z);
                point.name = dir.name;
                scene.add(point);
                
                // Ø¥Ø¶Ø§ÙØ© ØªØ³Ù…ÙŠØ© Ù†ØµÙŠØ©
                createLabel(dir.name, pos.x, pos.y + 8, pos.z, dir.color);
            });
        }

        /**
         * Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚Ø·Ø¨ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠ
         */
        function createNorthCelestialPole() {
            const poleAlt = currentLatitude; // Ø§Ø±ØªÙØ§Ø¹ = Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶
            const poleAz = 0; // Ø´Ù…Ø§Ù„
            
            const pos = ASTRONOMICAL_SYSTEM.sphericalToCartesian(poleAz, poleAlt);
            
            console.log(`ğŸ“ Ø§Ù„Ù‚Ø·Ø¨ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠ: 
                Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶=${currentLatitude}Â°
                Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª: x=${pos.x.toFixed(1)}, y=${pos.y.toFixed(1)}, z=${pos.z.toFixed(1)}
                Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹=${poleAlt}Â°, Ø§Ù„Ø³Ù…Øª=${poleAz}Â°`);
            
            const geometry = new THREE.SphereGeometry(5, 16, 16);
            const material = new THREE.MeshBasicMaterial({ 
                color: 0x00f2ff,
                transparent: true,
                opacity: 0.9
            });
            
            const pole = new THREE.Mesh(geometry, material);
            pole.position.set(pos.x, pos.y, pos.z);
            pole.name = 'NCP';
            scene.add(pole);
            
            // ØªØ³Ù…ÙŠØ© Ø§Ù„Ù‚Ø·Ø¨ - ÙÙˆÙ‚Ù‡ Ø¨Ù‚Ù„ÙŠÙ„
            createLabel('NCP', pos.x, pos.y + 15, pos.z, 0x00f2ff);
        }

        /**
         * Ø¥Ù†Ø´Ø§Ø¡ ØªØ³Ù…ÙŠØ©
         */
        function createLabel(text, x, y, z, color) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 100;
            canvas.height = 30;
            
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.font = 'bold 14px Arial';
            ctx.fillStyle = `rgb(${(color >> 16) & 255}, ${(color >> 8) & 255}, ${color & 255})`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(text, canvas.width / 2, canvas.height / 2);
            
            const texture = new THREE.CanvasTexture(canvas);
            const material = new THREE.SpriteMaterial({ 
                map: texture, 
                transparent: true,
                opacity: 0.8
            });
            const sprite = new THREE.Sprite(material);
            sprite.scale.set(15, 5, 1);
            sprite.position.set(x, y, z);
            scene.add(sprite);
        }

        /**
         * Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ…
         */
        function setupControls() {
            // ØªØ­Ø¯ÙŠØ« Ù‚ÙŠÙ… Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
            updateCameraSpeed(1);
            updateTrackingSpeed(1);
            updateLST(localSiderealTime);
            updatePolarAngle(currentLatitude);
            updateGridAlpha(gridAlpha * 100);
            updateGridDensity(gridDensity);
            
            // ÙØªØ­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø·ÙŠ
            openAllAccordions();
        }

        /**
         * ÙØªØ­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø·ÙŠ
         */
        function openAllAccordions() {
            const accordions = ['cameraAccordion', 'gridsAccordion', 'telescopeAccordion', 'timeAccordion'];
            accordions.forEach(id => {
                const content = document.getElementById(id);
                const icon = content.previousElementSibling.querySelector('.accordion-icon');
                content.classList.add('open');
                icon.classList.add('rotated');
            });
        }

        /**
         * Ø¨Ø¯Ø¡ Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ­Ø±Ùƒ
         */
/*        function startAnimationLoop() {
            function animate() {
                requestAnimationFrame(animate);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙÙ„ÙƒÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ØªØ¯ÙÙ‚Ø§Ù‹
                if (isTimeFlowing) {
                    updateSiderealTime();
                }
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
                controls.update();
                
                // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                updateHUD();
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ‚Ø§Ø·Ø¹ Ø§Ù„Ù„ÙŠØ²Ø±ÙŠ
                if (laserEnabled) {
                    calculateLaserIntersection();
                }
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø¯Ø§Ø¡
                updatePerformance();
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ù‡Ø¯
                renderer.render(scene, camera);
            }
            
            animate();
        }
*/
function startAnimationLoop() {
    let lastTime = 0;
    
    function animate(time) {
        requestAnimationFrame(animate);
        
        const delta = time - lastTime;
        lastTime = time;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙ„ÙƒÙŠ
        if (isTimeFlowing) {
            updateSiderealTime();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¬ÙˆÙ…
            if (starsRenderer) {
                starsRenderer.update(time, camera.position);
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ù…Ø³ÙŠ
            if (solarSystem) {
                solarSystem.update(time);
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
        controls.update();
        
        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        updateHUD();
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø¯Ø§Ø¡
        updatePerformance();
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ù‡Ø¯
        renderer.render(scene, camera);
    }
    
    animate(0);
}

        /**
         * Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
         */
        function setupEventListeners() {
            // ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ù†Ø§ÙØ°Ø©
            window.addEventListener('resize', onWindowResize);
            
            // Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
            window.addEventListener('keydown', handleKeyDown);
            window.addEventListener('keyup', handleKeyUp);
            
            // Ù…Ù†Ø¹ Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ø¨Ø¹Ø¶ Ø§Ù„Ù…ÙØ§ØªÙŠØ­
            window.addEventListener('keydown', (e) => {
                // Ù…Ù†Ø¹ Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ØªÙŠ Ù†Ø³ØªØ®Ø¯Ù…Ù‡Ø§
                const preventKeys = [' ', 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'F1', 'F11'];
                if (preventKeys.includes(e.key)) {
                    e.preventDefault();
                }
            });
            
            // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªÙŠ ØªØ¹Ù…Ù„ Ø¨Ø§Ù„Ù„Ù…Ø³
            setupTouchControls();
        }

        /**
         * Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ù†Ø§ÙØ°Ø©
         */
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        /**
         * Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø¶ØºØ·Ø§Øª Ø§Ù„Ù…ÙØ§ØªÙŠØ­
         */
        function handleKeyDown(e) {
            const key = e.key.toLowerCase();
            const ctrl = e.ctrlKey || e.metaKey;
            
            // Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ø§Ù…
            if (ctrl && key === 'h') {
                e.preventDefault();
                toggleControls();
            } else if (ctrl && key === 'd') {
                e.preventDefault();
                toggleHUD();
            } else if (key === 'f11') {
                e.preventDefault();
                toggleFullscreen();
            }
            
            // Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø´Ø¨ÙƒØ§Øª
            else if (key === 'g') {
                e.preventDefault();
                toggleGrid('equatorial');
            } else if (key === 'h' && !ctrl) {
                e.preventDefault();
                toggleGrid('horizontal');
            } else if (key === 'j') {
                e.preventDefault();
                toggleGrid('ecliptic');
            }
            
            // Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨
            else if (key === 'arrowup') {
                e.preventDefault();
                moveTelescope('north');
            } else if (key === 'arrowdown') {
                e.preventDefault();
                moveTelescope('south');
            } else if (key === 'arrowright') {
                e.preventDefault();
                moveTelescope('east');
            } else if (key === 'arrowleft') {
                e.preventDefault();
                moveTelescope('west');
            }
            
            // Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù„ÙŠØ²Ø±
            else if (key === 'l') {
                e.preventDefault();
                toggleLaser();
            }
            
            // Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
            else if (key === '1') {
                e.preventDefault();
                setCameraMode('free');
            } else if (key === '2') {
                e.preventDefault();
                setCameraMode('telescope');
            } else if (key === '3') {
                e.preventDefault();
                setCameraMode('zenith');
            }
            
            // Ø£Ø¯ÙˆØ§Øª Ø¥Ø¶Ø§ÙÙŠØ©
            else if (key === 'p') {
                e.preventDefault();
                captureImage();
            } else if (key === 'r') {
                e.preventDefault();
                toggleRecording();
            } else if (key === 'f1') {
                e.preventDefault();
                toggleShortcuts();
            } else if (key === 'home') {
                e.preventDefault();
                resetTelescope();
            }
        }

        /**
         * Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø±ÙØ¹ Ø§Ù„Ù…ÙØ§ØªÙŠØ­
         */
        function handleKeyUp(e) {
            const key = e.key.toLowerCase();
            
            // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø³ØªÙ…Ø±Ø© Ø¹Ù†Ø¯ Ø±ÙØ¹ Ø§Ù„Ù…ÙØ§ØªÙŠØ­
            if (['arrowup', 'arrowdown', 'arrowleft', 'arrowright'].includes(key)) {
                stopContinuousMove();
            }
        }

        /**
         * Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù„Ù…Ø³
         */
        function setupTouchControls() {
            // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹Ø§Øª Ø§Ù„Ù„Ù…Ø³ Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ…
            const arrowButtons = document.querySelectorAll('.arrow-btn');
            arrowButtons.forEach(button => {
                button.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    const direction = button.classList.contains('north') ? 'north' :
                                     button.classList.contains('south') ? 'south' :
                                     button.classList.contains('east') ? 'east' :
                                     button.classList.contains('west') ? 'west' : null;
                    if (direction) {
                        startContinuousMove(direction);
                    }
                });
                
                button.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    stopContinuousMove();
                });
            });
        }

        // ==================== Ø¯ÙˆØ§Ù„ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ====================

        /**
         * ØªØ¨Ø¯ÙŠÙ„ Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
         */
        window.toggleControls = function() {
            controlsVisible = !controlsVisible;
            controlsPanel.classList.toggle('hidden', !controlsVisible);
            
            const notification = controlsVisible ? 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¸Ø§Ù‡Ø±Ø©' : 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù…Ø®ÙÙŠØ©';
            showNotification('âš™ï¸ ' + notification, '', 'info');
            
            // ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ ÙÙŠ Ø­Ø§Ù„Ø© ÙˆØ¬ÙˆØ¯Ù‡
            updateControlButtons();
        };

        /**
         * ØªØ¨Ø¯ÙŠÙ„ Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
         */
        window.toggleHUD = function() {
            hudVisible = !hudVisible;
            hudPanel.classList.toggle('hidden', !hudVisible);
            
            const notification = hudVisible ? 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø¸Ø§Ù‡Ø±Ø©' : 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø®ÙÙŠØ©';
            showNotification('ğŸ“Š ' + notification, '', 'info');
            
            updateControlButtons();
        };

        /**
         * ØªØ¨Ø¯ÙŠÙ„ ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©
         */
        window.toggleFullscreen = function() {
            if (!isFullscreen) {
                const elem = document.documentElement;
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) {
                    elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) {
                    elem.msRequestFullscreen();
                }
                isFullscreen = true;
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
                isFullscreen = false;
            }
        };

        /**
         * ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ…
         */
        function updateControlButtons() {
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ ÙÙŠ Ø­Ø§Ù„Ø© ÙˆØ¬ÙˆØ¯Ù‡Ø§
            // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚ Ù‡Ù†Ø§ Ù„ØªØ­Ø¯ÙŠØ« Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        }

        /**
         * ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„ÙÙ„ÙƒÙŠØ©
         */
        window.toggleGrid = function(gridType) {
            gridVisibility[gridType] = !gridVisibility[gridType];
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            const checkbox = document.getElementById(`${gridType}GridCheckbox`);
            if (checkbox) {
                checkbox.classList.toggle('checked', gridVisibility[gridType]);
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ù‡Ø¯
            updateGridVisibility();
            
            // Ø¥Ø´Ø¹Ø§Ø±
            const gridNames = {
                equatorial: 'Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©',
                horizontal: 'Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø³Ù…ØªÙŠØ©',
                ecliptic: 'Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¨Ø±ÙˆØ¬'
            };
            
            const action = gridVisibility[gridType] ? 'Ù…ÙØ¹Ù‘Ù„Ø©' : 'Ù…Ø¹Ø·Ù‘Ù„Ø©';
            showNotification('ğŸ“ ' + gridNames[gridType], action, gridVisibility[gridType] ? 'success' : 'warning');
        };

        /**
         * ØªØ­Ø¯ÙŠØ« Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø´Ø¨ÙƒØ§Øª
         */
        function updateGridVisibility() {
            equatorialGrid.visible = gridVisibility.equatorial;
            horizontalGrid.visible = gridVisibility.horizontal;
            eclipticGrid.visible = gridVisibility.ecliptic;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¤Ø´Ø±
            document.getElementById('gridsIndicator').textContent = 
                `${gridVisibility.equatorial ? 'ğŸŒ' : ''}${gridVisibility.horizontal ? 'ğŸ—ºï¸' : ''}`;
        }

        /**
         * ØªØ­Ø¯ÙŠØ« Ø´ÙØ§ÙÙŠØ© Ø§Ù„Ø´Ø¨ÙƒØ§Øª
         */
        window.updateGridAlpha = function(value) {
            gridAlpha = value / 100;
            document.getElementById('gridAlphaValue').textContent = value + '%';
            
            // ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø¨ÙƒØ§Øª
            [equatorialGrid, horizontalGrid, eclipticGrid].forEach(grid => {
                grid.children.forEach(child => {
                    if (child instanceof THREE.Line) {
                        child.material.opacity = gridAlpha;
                    }
                });
            });
        };

        /**
         * ØªØ­Ø¯ÙŠØ« ÙƒØ«Ø§ÙØ© Ø§Ù„Ø´Ø¨ÙƒØ§Øª
         */
        window.updateGridDensity = function(value) {
            gridDensity = parseInt(value);
            const densityName = SYSTEM.GRID_DENSITY_LEVELS[gridDensity]?.name || 'Ù…ØªÙˆØ³Ø·Ø©';
            document.getElementById('gridDensityValue').textContent = densityName;
            
            // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒØ§Øª
            createEquatorialGrid();
            createHorizontalGrid();
            createEclipticGrid();
            
            showNotification('ğŸ“Š ÙƒØ«Ø§ÙØ© Ø§Ù„Ø´Ø¨ÙƒØ§Øª', densityName, 'info');
        };

        /**
         * ØªØ³Ù„ÙŠØ· Ø§Ù„Ø¶ÙˆØ¡ Ø¹Ù„Ù‰ Ø´Ø¨ÙƒØ© Ù…Ø¹ÙŠÙ†Ø©
         */
        window.highlightGrid = function(gridType) {
            // ÙŠÙ…ÙƒÙ† ØªÙ†ÙÙŠØ° ØªØ£Ø«ÙŠØ± ØªØ³Ù„ÙŠØ· Ø§Ù„Ø¶ÙˆØ¡ Ù‡Ù†Ø§
            showNotification('âœ¨ ØªØ³Ù„ÙŠØ· Ø§Ù„Ø¶ÙˆØ¡', `Ø¹Ù„Ù‰ ${gridType === 'equatorial' ? 'Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©' : 'Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø³Ù…ØªÙŠØ©'}`, 'info');
        };

        /**
         * ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ÙŠØ²Ø±
         */
        window.toggleLaser = function() {
            laserEnabled = !laserEnabled;
            laserBeam.material.opacity = laserEnabled ? 0.8 : 0;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            document.getElementById('laserToggleBtn').classList.toggle('active', laserEnabled);
            document.getElementById('laserStatusText').textContent = `Ù„ÙŠØ²Ø±: ${laserEnabled ? 'Ù…ÙØ¹Ù‘Ù„' : 'Ù…Ø¹Ø·Ù„'}`;
            document.getElementById('laserStatus').className = `status-icon ${laserEnabled ? 'warning' : ''}`;
            
            // Ø¥Ø´Ø¹Ø§Ø±
            showNotification(laserEnabled ? 'ğŸ”´ Ø§Ù„Ù„ÙŠØ²Ø± Ù…ÙØ¹Ù‘Ù„' : 'âš« Ø§Ù„Ù„ÙŠØ²Ø± Ù…Ø¹Ø·Ù„', '', laserEnabled ? 'warning' : 'info');
        };

        /**
         * ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØªØ¨Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
         */
        window.toggleAutoTrack = function() {
            autoTracking = !autoTracking;
            document.getElementById('autoTrackBtn').classList.toggle('active', autoTracking);
            
            showNotification(autoTracking ? 'ğŸ”„ Ø§Ù„ØªØªØ¨Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…ÙØ¹Ù‘Ù„' : 'â¸ï¸ Ø§Ù„ØªØªØ¨Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ø¹Ø·Ù„', '', 'info');
        };

        /**
         * Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø©
         */
        window.captureImage = function() {
            // ÙŠÙ…ÙƒÙ† ØªÙ†ÙÙŠØ° Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§
            showNotification('ğŸ“¸ ØªÙ… Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø©', 'ØªÙ… Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø© ÙÙŠ Ø§Ù„Ù…Ø¹Ø±Ø¶', 'success');
        };

        /**
         * ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
         */
        window.toggleRecording = function() {
            isRecording = !isRecording;
            document.getElementById('recordBtn').classList.toggle('active', isRecording);
            
            showNotification(isRecording ? 'âºï¸ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¬Ø§Ø±ÙŠ' : 'â¹ï¸ ØªÙˆÙ‚Ù Ø§Ù„ØªØ³Ø¬ÙŠÙ„', '', isRecording ? 'danger' : 'info');
        };

        /**
         * Ø­Ø±ÙƒØ© Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨
         */
/*        window.moveTelescope = function(direction) {
            const speed = currentSpeed * 0.05;
            
            switch(direction) {
                case 'north':  // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø±ØªÙØ§Ø¹
                    decAxis.rotation.x += speed;
                    break;
                case 'south':  // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹
                    decAxis.rotation.x -= speed;
                    break;
                case 'east':   // ØªØ­Ø±ÙŠÙƒ Ø´Ø±Ù‚Ø§Ù‹ (ÙÙŠ Ø§Ù„Ø³Ù…Ø§Ø¡)
                    raShaft.rotation.y -= speed;
                    break;
                case 'west':   // ØªØ­Ø±ÙŠÙƒ ØºØ±Ø¨Ø§Ù‹ (ÙÙŠ Ø§Ù„Ø³Ù…Ø§Ø¡)
                    raShaft.rotation.y += speed;
                    break;
            }
            
            // Ù…Ù†Ø¹ Ø§Ù„Ù…ÙŠÙ„ Ø§Ù„Ø²Ø§Ø¦Ø¯
            decAxis.rotation.x = Math.max(-Math.PI/2, Math.min(Math.PI/2, decAxis.rotation.x));
            
            // ØªØ­Ø¯ÙŠØ« HUD ÙÙˆØ±Ø§Ù‹
            updateHUD();
        };
*/
/**
 * Ø­Ø±ÙƒØ© Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ - Ù…Ø¹Ø¯Ù„Ø© Ù„Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø´ÙˆÙƒÙŠ
 */
window.moveTelescope = function(direction) {
    const speed = currentSpeed * 0.05;
    
    switch(direction) {
        case 'north':  // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ (ØªØ­Ø±ÙŠÙƒ Ù…Ø­ÙˆØ± Dec)
            decAxis.rotation.x += speed;
            console.log(`â¬†ï¸  ØªØ­Ø±ÙŠÙƒ Ø´Ù…Ø§Ù„Ø§Ù‹: Dec += ${speed.toFixed(3)}`);
            break;
        case 'south':  // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹
            decAxis.rotation.x -= speed;
            console.log(`â¬‡ï¸  ØªØ­Ø±ÙŠÙƒ Ø¬Ù†ÙˆØ¨Ø§Ù‹: Dec -= ${speed.toFixed(3)}`);
            break;
        case 'east':   // ØªØ­Ø±ÙŠÙƒ Ø´Ø±Ù‚Ø§Ù‹ (ØªØ¯ÙˆÙŠØ± Ù…Ø­ÙˆØ± RA)
            raShaft.rotation.y -= speed;
            console.log(`â–¶ï¸  ØªØ­Ø±ÙŠÙƒ Ø´Ø±Ù‚Ø§Ù‹: RA -= ${speed.toFixed(3)}`);
            break;
        case 'west':   // ØªØ­Ø±ÙŠÙƒ ØºØ±Ø¨Ø§Ù‹
            raShaft.rotation.y += speed;
            console.log(`â—€ï¸  ØªØ­Ø±ÙŠÙƒ ØºØ±Ø¨Ø§Ù‹: RA += ${speed.toFixed(3)}`);
            break;
    }
    
    // Ù…Ù†Ø¹ Ø§Ù„Ù…ÙŠÙ„ Ø§Ù„Ø²Ø§Ø¦Ø¯ Ù„Ù„Ø£Ù†Ø¨ÙˆØ¨
    decAxis.rotation.x = Math.max(-Math.PI/2, Math.min(Math.PI/2, decAxis.rotation.x));
    
    // ØªØ­Ø¯ÙŠØ« HUD ÙÙˆØ±Ø§Ù‹
    updateHUD();
};

        /**
         * Ø¨Ø¯Ø¡ Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø³ØªÙ…Ø±Ø©
         */
        window.startContinuousMove = function(direction) {
            stopContinuousMove();
            moveInterval = setInterval(() => {
                moveTelescope(direction);
            }, 16); // ~60 FPS
        };

        /**
         * Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø³ØªÙ…Ø±Ø©
         */
        window.stopContinuousMove = function() {
            if (moveInterval) {
                clearInterval(moveInterval);
                moveInterval = null;
            }
        };

/**
 * Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ - Ù…Ø¹Ø¯Ù„Ø© Ù„Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø´ÙˆÙƒÙŠ
 */
window.resetTelescope = function() {
    raShaft.rotation.y = 0;
    decAxis.rotation.x = 0;
    console.log('ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨: RA=0, Dec=0');
    showNotification('ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†', 'ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ Ø¥Ù„Ù‰ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ', 'info');
};

        /**
         * ØªØ­Ø¯ÙŠØ¯ ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
         */
        window.setCameraMode = function(mode) {
            cameraMode = mode;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ø´Ø·Ø©
            document.querySelectorAll('#cameraAccordion .quick-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`#cameraAccordion .quick-btn:nth-child(${mode === 'free' ? 1 : mode === 'telescope' ? 2 : mode === 'zenith' ? 3 : 4})`).classList.add('active');
            
            // ØªØ·Ø¨ÙŠÙ‚ ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
            switch(mode) {
                case 'free':
                    controls.enabled = true;
                    break;
                case 'telescope':
                    controls.enabled = true;
                    const telescopePos = new THREE.Vector3();
                    telescope.getWorldPosition(telescopePos);
                    camera.position.copy(telescopePos).add(new THREE.Vector3(5, 5, 5));
                    camera.lookAt(telescopePos);
                    controls.update();
                    break;
                case 'zenith':
                    controls.enabled = true;
                    camera.position.set(0, SYSTEM.SPHERE_RADIUS * 0.8, 0);
                    camera.lookAt(0, 0, 0);
                    controls.update();
                    break;
                case 'north':
                    controls.enabled = true;
                    camera.position.set(0, 100, 300);
                    camera.lookAt(0, 0, 0);
                    controls.update();
                    break;
            }
            
            showNotification('ğŸ“· ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§', mode === 'free' ? 'Ø­Ø±ÙŠØ© Ø§Ù„Ø­Ø±ÙƒØ©' : 
                mode === 'telescope' ? 'ØªØªØ¨Ø¹ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨' : 
                mode === 'zenith' ? 'Ø§Ù„Ø°Ø±ÙˆØ©' : 'Ø§Ù„Ø´Ù…Ø§Ù„', 'info');
        };

        /**
         * ØªØ­Ø¯ÙŠØ« Ø³Ø±Ø¹Ø© Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
         */
        window.updateCameraSpeed = function(value) {
            cameraSpeed = parseFloat(value);
            document.getElementById('cameraSpeedValue').textContent = cameraSpeed.toFixed(1) + 'x';
            controls.rotateSpeed = 0.8 * cameraSpeed;
            controls.panSpeed = 1.2 * cameraSpeed;
        };

        /**
         * ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ø³Ù„Ø³Ø©
         */
        window.toggleSmoothCamera = function() {
            smoothCamera = !smoothCamera;
            document.getElementById('smoothCameraCheckbox').classList.toggle('checked', smoothCamera);
            controls.enableDamping = smoothCamera;
        };

        /**
         * ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù‚ØµÙˆØ± Ø§Ù„Ø­Ø±ÙƒÙŠ Ù„Ù„ÙƒØ§Ù…ÙŠØ±Ø§
         */
        window.toggleCameraInertia = function() {
            cameraInertia = !cameraInertia;
            document.getElementById('cameraInertiaCheckbox').classList.toggle('checked', cameraInertia);
            controls.dampingFactor = cameraInertia ? 0.05 : 0;
        };

        /**
         * ØªØ­Ø¯ÙŠØ« Ø³Ø±Ø¹Ø© Ø§Ù„ØªØªØ¨Ø¹
         */
        window.updateTrackingSpeed = function(value) {
            currentSpeed = parseFloat(value);
            document.getElementById('trackingSpeedValue').textContent = currentSpeed.toFixed(1) + 'x';
            document.getElementById('hudSpeed').textContent = currentSpeed.toFixed(1) + 'x';
        };

        /**
         * ØªØ­Ø¯ÙŠØ« Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ù‚Ø·Ø¨ÙŠ
         */
        window.updatePolarAngle = function(value) {
            currentLatitude = parseFloat(value);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            document.getElementById('polarAngleValue').textContent = currentLatitude + 'Â°';
            document.getElementById('hudLat').textContent = currentLatitude.toFixed(2) + 'Â° Ø´Ù…Ø§Ù„';
            document.getElementById('hudPolarAngle').textContent = (90 - currentLatitude).toFixed(2) + 'Â°';
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¸Ø§Ù…
            updateCelestialSphereRotation();
            updateEquatorialGridRotation();
            updatePolarAlignment();
            
            // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚Ø·Ø¨ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠ
            scene.children.forEach((child, index) => {
                if (child instanceof THREE.Mesh && child.position.y > SYSTEM.SPHERE_RADIUS * 0.5) {
                    scene.remove(child);
                }
            });
            createNorthCelestialPole();
        };

        /**
         * Ù…Ø­Ø§Ø°Ø§Ø© Ù„Ù„Ø´Ù…Ø§Ù„
         */
        window.alignToNorth = function() {
            decAxis.rotation.x = 0;
            raShaft.rotation.y = 0;
            showNotification('ğŸ§­ Ù…Ø­Ø§Ø°Ø§Ø© Ù„Ù„Ø´Ù…Ø§Ù„', 'ØªÙ… ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ Ù†Ø­Ùˆ Ø§Ù„Ø´Ù…Ø§Ù„', 'info');
        };

/**
 * Ù…Ø­Ø§Ø°Ø§Ø© Ù„Ù„Ù‚Ø·Ø¨ - Ù…Ø¹Ø¯Ù„Ø© Ù„Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø´ÙˆÙƒÙŠ
 */
window.alignToPole = function() {
    decAxis.rotation.x = (90 - currentLatitude) * Math.PI / 180;
    raShaft.rotation.y = 0;
    console.log(`âœ¨ Ù…Ø­Ø§Ø°Ø§Ø© Ù„Ù„Ù‚Ø·Ø¨: Dec = ${(90 - currentLatitude).toFixed(1)}Â°, RA = 0Â°`);
    showNotification('âœ¨ Ù…Ø­Ø§Ø°Ø§Ø© Ù„Ù„Ù‚Ø·Ø¨', 'ØªÙ… ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ Ù†Ø­Ùˆ Ø§Ù„Ù‚Ø·Ø¨ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠ', 'info');
};

        /**
         * Ù…Ø¹Ø§ÙŠØ±Ø© Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨
         */
        window.calibrateTelescope = function() {
            showNotification('ğŸ”§ Ù…Ø¹Ø§ÙŠØ±Ø© Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨', 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©...', 'warning');
            setTimeout(() => {
                showNotification('âœ… ØªÙ…Øª Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©', 'ØªÙ…Øª Ù…Ø¹Ø§ÙŠØ±Ø© Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }, 2000);
        };

        /**
         * ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ù†Ø¬Ù…ÙŠ Ø§Ù„Ù…Ø­Ù„ÙŠ
         */
        window.updateLST = function(value) {
            localSiderealTime = parseFloat(value);
            document.getElementById('lstValue').textContent = localSiderealTime.toFixed(1) + 'h';
            
            // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙˆÙ‚Øª Ù„Ù„Ø¹Ø±Ø¶
            const hours = Math.floor(localSiderealTime);
            const minutes = Math.floor((localSiderealTime - hours) * 60);
            const seconds = Math.floor(((localSiderealTime - hours) * 60 - minutes) * 60);
            
            document.getElementById('hudLST').textContent = 
                `${String(hours).padStart(2, '0')}h ${String(minutes).padStart(2, '0')}m ${String(seconds).padStart(2, '0')}s`;
            
            // ØªØ­Ø¯ÙŠØ« Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ù‚Ø¨Ø© ÙˆØ§Ù„Ø´Ø¨ÙƒØ§Øª
            updateCelestialSphereRotation();
            updateEquatorialGridRotation();
        };

        /**
         * ØªØ­Ø¯ÙŠØ« Ø³Ø±Ø¹Ø© Ø§Ù„Ø²Ù…Ù†
         */
        window.updateTimeSpeed = function(value) {
            timeSpeed = parseInt(value);
            document.getElementById('timeSpeedValue').textContent = timeSpeed + 'x';
        };

        /**
         * ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙˆÙ‚Øª Ø¥Ù„Ù‰ Ø§Ù„Ø¢Ù†
         */
        window.setTimeToNow = function() {
            const now = new Date();
            localSiderealTime = 18.0; // ØªØ¨Ø³ÙŠØ·
            document.getElementById('lstSlider').value = localSiderealTime;
            updateLST(localSiderealTime);
            showNotification('ğŸ•’ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ', 'ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙÙ„ÙƒÙŠ Ø¥Ù„Ù‰ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ', 'info');
        };

        /**
         * ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙˆÙ‚Øª Ø¥Ù„Ù‰ Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„
         */
        window.setTimeToMidnight = function() {
            localSiderealTime = 0;
            document.getElementById('lstSlider').value = 0;
            updateLST(0);
            showNotification('ğŸŒ™ Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„', 'ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙÙ„ÙƒÙŠ Ø¥Ù„Ù‰ Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„', 'info');
        };

        /**
         * ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙˆÙ‚Øª Ø¥Ù„Ù‰ Ø§Ù„Ø¸Ù‡Ø±
         */
        window.setTimeToNoon = function() {
            localSiderealTime = 12;
            document.getElementById('lstSlider').value = 12;
            updateLST(12);
            showNotification('â˜€ï¸ Ø§Ù„Ø¸Ù‡Ø± Ø§Ù„ÙÙ„ÙƒÙŠ', 'ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙÙ„ÙƒÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ø¸Ù‡Ø±', 'info');
        };

        /**
         * ØªØ¨Ø¯ÙŠÙ„ ØªØ¯ÙÙ‚ Ø§Ù„Ø²Ù…Ù†
         */
        window.toggleTimeFlow = function() {
            isTimeFlowing = !isTimeFlowing;
            showNotification(isTimeFlowing ? 'â© Ø§Ù„Ø²Ù…Ù† ÙŠØªØ¯ÙÙ‚' : 'â¸ï¸ Ø§Ù„Ø²Ù…Ù† Ù…ØªØ¬Ù…Ø¯', '', 'info');
        };

        /**
         * ØªØ¨Ø¯ÙŠÙ„ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø®ØªØµØ§Ø±Ø§Øª
         */
        window.toggleShortcuts = function() {
            const isActive = shortcutsWindow.classList.contains('active');
            shortcutsWindow.classList.toggle('active', !isActive);
        };

        /**
         * ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¸Ù‡Ø±
         */
        window.toggleTheme = function() {
            document.body.classList.toggle('light-mode');
            const isLight = document.body.classList.contains('light-mode');
            showNotification(isLight ? 'ğŸŒ“ Ø§Ù„Ù…Ø¸Ù‡Ø± Ø§Ù„ÙØ§ØªØ­' : 'ğŸŒ‘ Ø§Ù„Ù…Ø¸Ù‡Ø± Ø§Ù„Ø¯Ø§ÙƒÙ†', '', 'info');
        };

        /**
         * Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
         */
        window.saveSettings = function() {
            // ÙŠÙ…ÙƒÙ† ØªÙ†ÙÙŠØ° Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù‡Ù†Ø§
            showNotification('ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…', 'success');
        };

        /**
         * ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
         */
        window.loadSettings = function() {
            // ÙŠÙ…ÙƒÙ† ØªÙ†ÙÙŠØ° ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù‡Ù†Ø§
            showNotification('ğŸ“‚ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©', 'info');
        };

        /**
         * ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
         */
        window.exportData = function() {
            // ÙŠÙ…ÙƒÙ† ØªÙ†ÙÙŠØ° ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‡Ù†Ø§
            showNotification('ğŸ“¤ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'ØªÙ… ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…', 'success');
        };

        /**
         * Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
         */
        window.showHelp = function() {
            toggleShortcuts();
        };

        /**
         * ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø·ÙŠ
         */
        window.toggleAccordion = function(id) {
            const content = document.getElementById(id);
            const icon = content.previousElementSibling.querySelector('.accordion-icon');
            content.classList.toggle('open');
            icon.classList.toggle('rotated');
        };

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… ====================

        /**
         * ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ù†Ø¬Ù…ÙŠ
         */
        function updateSiderealTime() {
            localSiderealTime = (localSiderealTime + (0.0027 * timeSpeed / 60)) % 24;
            document.getElementById('lstSlider').value = localSiderealTime;
            updateLST(localSiderealTime);
        }

        /**
         * ØªØ­Ø¯ÙŠØ« Ù„ÙˆØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
         */
        function updateHUD() {
            // Ø­Ø³Ø§Ø¨ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨
            const telescopeDirection = new THREE.Vector3(0, 0, 1);
            telescopeDirection.applyQuaternion(telescope.getWorldQuaternion(new THREE.Quaternion()));
            
            const telescopePos = new THREE.Vector3();
            telescope.getWorldPosition(telescopePos);
            
            const endPoint = telescopeDirection.multiplyScalar(SYSTEM.SPHERE_RADIUS * 2).add(telescopePos);
            const spherical = ASTRONOMICAL_SYSTEM.cartesianToSpherical(endPoint.x, endPoint.y, endPoint.z);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø³Ù…ØªÙŠØ©
            document.getElementById('hudAlt').textContent = spherical.altitude.toFixed(2) + 'Â°';
            document.getElementById('hudAz').textContent = spherical.azimuth.toFixed(2) + 'Â°';
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©
            const equatorial = ASTRONOMICAL_SYSTEM.horizontalToEquatorial(
                spherical.altitude, spherical.azimuth, currentLatitude, localSiderealTime
            );
            
            const raHours = equatorial.raHours;
            const raH = Math.floor(raHours);
            const raM = Math.floor((raHours - raH) * 60);
            const raS = (((raHours - raH) * 60 - raM) * 60).toFixed(1);
            
            const decDeg = equatorial.decDeg;
            const decSign = decDeg >= 0 ? '+' : '-';
            const decAbs = Math.abs(decDeg);
            const decD = Math.floor(decAbs);
            const decM = Math.floor((decAbs - decD) * 60);
            const decS = Math.floor(((decAbs - decD) * 60 - decM) * 60);
            
            document.getElementById('hudRA').textContent = 
                `${String(raH).padStart(2, '0')}h ${String(raM).padStart(2, '0')}m ${String(raS).padStart(2, '0')}s`;
            
            document.getElementById('hudDec').textContent = 
                `${decSign}${String(decD).padStart(2, '0')}Â° ${String(decM).padStart(2, '0')}â€² ${String(decS).padStart(2, '0')}â€³`;
            
            // ØªØ­Ø¯ÙŠØ« ÙˆØ¶Ø¹ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨
            document.getElementById('hudTelescopeMode').textContent = autoTracking ? 'ØªØªØ¨Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ' : 'ÙŠØ¯ÙˆÙŠ';
            
            // ØªØ­Ø¯ÙŠØ« ØªÙ‚Ø§Ø·Ø¹ Ø§Ù„Ù„ÙŠØ²Ø±
            document.getElementById('hudIntersection').textContent = laserEnabled ? 
                `Ù†Ø´Ø· (${spherical.altitude.toFixed(1)}Â°, ${spherical.azimuth.toFixed(1)}Â°)` : 'ØºÙŠØ± Ù†Ø´Ø·';
    // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¬ÙˆÙ…
    if (astroBridge) {
        const visibleStars = astroBridge.getVisibleStarsCount();
        const brightest = astroBridge.getBrightestStars(1)[0];
        
        // ØªØ­Ø¯ÙŠØ« Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†Ø§ØµØ± HUD Ø¬Ø¯ÙŠØ¯Ø©
        updateStarInfoDisplay(brightest, visibleStars);
    }        
}

function updateStarInfoDisplay(brightestStar, starCount) {
    let starInfoElement = document.getElementById('starInfo');
    if (!starInfoElement) {
        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù†ØµØ± Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
        const hudSection = document.createElement('div');
        hudSection.className = 'hud-section';
        hudSection.innerHTML = `
            <div class="hud-section-title">âœ¨ Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„Ù…Ø±Ø¦ÙŠØ©</div>
            <div class="hud-data">
                <div class="hud-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ø¬ÙˆÙ…:</div>
                <div class="hud-value" id="starCount">${starCount}</div>
                
                <div class="hud-label">Ø£Ù„Ù…Ø¹ Ù†Ø¬Ù…:</div>
                <div class="hud-value" id="brightestStar">${brightestStar ? brightestStar.arabicName : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</div>
                
                <div class="hud-label">Ø§Ù„Ù‚Ø¯Ø± Ø§Ù„Ø¸Ø§Ù‡Ø±ÙŠ:</div>
                <div class="hud-value" id="starMagnitude">${brightestStar ? brightestStar.magnitude.toFixed(2) : '--'}</div>
            </div>
        `;
        hudPanel.appendChild(hudSection);
    } else {
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        document.getElementById('starCount').textContent = starCount;
        if (brightestStar) {
            document.getElementById('brightestStar').textContent = brightestStar.arabicName || brightestStar.name;
            document.getElementById('starMagnitude').textContent = brightestStar.magnitude.toFixed(2);
        }
    }
}

        /**
         * Ø­Ø³Ø§Ø¨ ØªÙ‚Ø§Ø·Ø¹ Ø§Ù„Ù„ÙŠØ²Ø± Ù…Ø¹ Ø§Ù„Ù‚Ø¨Ø©
         */
        function calculateLaserIntersection() {
            if (!laserEnabled) return;
            
            // ÙŠÙ…ÙƒÙ† ØªÙ†ÙÙŠØ° Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ‚Ø§Ø·Ø¹ Ù‡Ù†Ø§
            // Ù‡Ø°Ù‡ Ø¯Ø§Ù„Ø© Ù…Ø¹Ù‚Ø¯Ø© ØªØªØ·Ù„Ø¨ Ø­Ø³Ø§Ø¨Ø§Øª Ù‡Ù†Ø¯Ø³ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©
        }

        /**
         * ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø¯Ø§Ø¡
         */
        function updatePerformance() {
            frameCount++;
            const currentTime = performance.now();
            
            if (currentTime >= lastTime + 1000) {
                fps = Math.round((frameCount * 1000) / (currentTime - lastTime));
                frameCount = 0;
                lastTime = currentTime;
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù… (Ù…Ø­Ø§ÙƒØ§Ø©)
                systemLoad = 20 + Math.random() * 30;
                document.getElementById('cpuUsage').textContent = `âš¡ CPU: ${Math.round(systemLoad)}%`;
                document.getElementById('systemLoadBar').style.width = systemLoad + '%';
                document.getElementById('hudMemory').textContent = Math.round(20 + Math.random() * 40) + '%';
                document.getElementById('hudTemp').textContent = Math.round(15 + Math.random() * 10) + 'Â°C';
            }
        }

        /**
         * ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®
         */
        function updateDateTime() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('ar-SA');
            const timeStr = now.toLocaleTimeString('ar-SA');
            document.getElementById('dateTime').textContent = `ğŸ•’ ${dateStr} ${timeStr}`;
        }

        /**
         * ØªØ­Ø¯ÙŠØ« Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù…
         */
        function updateSystemUsage() {
            // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù…
            document.getElementById('systemStatusText').textContent = 'Ù†Ø´Ø·';
            document.getElementById('telescopeIndicator').textContent = 'Ø¬Ø§Ù‡Ø²';
        }

        /**
         * Ø¹Ø±Ø¶ Ø¥Ø´Ø¹Ø§Ø±
         */
        function showNotification(title, message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const time = new Date().toLocaleTimeString('ar-SA', { hour: '2-digit', minute: '2-digit' });
            
            notification.innerHTML = `
                <div class="notification-header">
                    <div class="notification-title">${title}</div>
                    <div class="notification-time">${time}</div>
                </div>
                <div class="notification-message">${message}</div>
            `;
            
            notificationCenter.appendChild(notification);
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 500);
            }, 5000);
        }

        /**
         * Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…
         */
        function runSystemTests() {
            setTimeout(() => {
                console.log('ğŸ§ª Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…...');
                
                const results = ASTRONOMICAL_SYSTEM.testCoordinateSystem();
                const passedTests = results.filter(r => r.passed).length;
                const totalTests = results.length;
                
                if (passedTests === totalTests) {
                    console.log(`âœ… Ø¬Ù…ÙŠØ¹ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ù†Ø§Ø¬Ø­Ø© (${passedTests}/${totalTests})`);
                    document.getElementById('systemStatus').className = 'status-icon active';
                } else {
                    console.warn(`âš ï¸ Ø¨Ø¹Ø¶ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª ÙØ´Ù„Øª (${passedTests}/${totalTests})`);
                    document.getElementById('systemStatus').className = 'status-icon warning';
                    
                    results.forEach(result => {
                        if (!result.passed) {
                            console.warn(`âŒ ÙØ´Ù„: ${result.description}`);
                        }
                    });
                }
                
                showNotification('ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…', `ØªÙ…Øª ${passedTests}/${totalTests} Ø§Ø®ØªØ¨Ø§Ø±Ø§Ù‹`, 
                    passedTests === totalTests ? 'success' : 'warning');
            }, 2000);
        }

        /**
         * ØªØ³Ø¬ÙŠÙ„ ØªØµØ­ÙŠØ­
         */
        function logDebug(message) {
            const debugContent = document.getElementById('debugContent');
            const timestamp = new Date().toLocaleTimeString();
            debugContent.innerHTML = `<div>[${timestamp}] ${message}</div>` + debugContent.innerHTML;
            
            // Ø­ÙØ¸ Ø§Ù„Ø³Ø¬Ù„
            systemLog.push({ time: timestamp, message: message });
        }

        /**
         * Ø¯Ø§Ù„Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø­Ø§Ø°Ø§Ø©
         */
        function testAlignment() {
            console.log('ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù†Ø¸Ø§Ù…:');
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ù†Ù‚Ø§Ø· Ø§Ù„ÙƒØ§Ø±Ø¯ÙŠÙ†Ø§Ù„
            const cardinalPoints = [
                { name: 'Ø§Ù„Ø´Ù…Ø§Ù„', az: 0, alt: 0 },
                { name: 'Ø§Ù„Ø´Ø±Ù‚', az: 90, alt: 0 },
                { name: 'Ø§Ù„Ø¬Ù†ÙˆØ¨', az: 180, alt: 0 },
                { name: 'Ø§Ù„ØºØ±Ø¨', az: 270, alt: 0 },
                { name: 'Ø§Ù„Ø°Ø±ÙˆØ©', az: 0, alt: 90 },
                { name: 'Ø§Ù„Ù‚Ø·Ø¨ NCP', az: 0, alt: currentLatitude }
            ];
            
            cardinalPoints.forEach(point => {
                const cart = ASTRONOMICAL_SYSTEM.sphericalToCartesian(point.az, point.alt);
                console.log(`ğŸ“ ${point.name}: 
                    Ø§Ù„Ø³Ù…Øª=${point.az}Â°, Ø§Ù„Ø§Ø±ØªÙØ§Ø¹=${point.alt}Â°
                    â†’ x=${cart.x.toFixed(1)}, y=${cart.y.toFixed(1)}, z=${cart.z.toFixed(1)}`);
            });
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©
            console.log(`ğŸ“ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©:
                Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ÙˆØ±: ${(90 - currentLatitude).toFixed(1)}Â°
                ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø´Ø¨ÙƒØ©: x=${(equatorialGrid.rotation.x * 180/Math.PI).toFixed(1)}Â°, 
                              y=${(equatorialGrid.rotation.y * 180/Math.PI).toFixed(1)}Â°, 
                              z=${(equatorialGrid.rotation.z * 180/Math.PI).toFixed(1)}Â°`);
        }

        // ==================== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ====================
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸš€ Ø¨Ø¯Ø¡ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙ„ÙƒÙŠ V4.0...');
            init();
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø­Ø§Ø°Ø§Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
            setTimeout(() => {
                testAlignment();
            }, 3000);
        });

        // ==================== Ù…Ø¹Ø§Ù„Ø¬Ø© ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© ====================
        document.addEventListener('fullscreenchange', () => {
            isFullscreen = !!document.fullscreenElement;
        });

        // ==================== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© ====================
        let systemLog = [];

        console.log('ğŸŒŒ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙ„ÙƒÙŠ Ø§Ù„Ù…Ø¹ÙŠØ§Ø±ÙŠ V4.0 - Ø§Ù„ÙƒÙˆØ¯ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙ†ÙÙŠØ°');
        console.log('ğŸ“ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ù…ØµØ­Ø­: X=Ø´Ø±Ù‚, Y=Ø°Ø±ÙˆØ©, Z=Ø´Ù…Ø§Ù„');
        console.log('ğŸ§­ Ù†ØµÙ Ø§Ù„ÙƒØ±Ø©: Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ');
        console.log('ğŸ¯ Ù…ÙŠØ²Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©: Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø£Ø³Ù‡Ù…ØŒ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§ØªØŒ Ø§Ù„Ø§Ø®ØªØµØ§Ø±Ø§Øª');
        console.log('ğŸ”§ Ø§Ù„ØªØµØ­ÙŠØ­Ø§Øª: Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„ÙƒØ§Ù…Ù„ØŒ Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©ØŒ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØªÙ„Ø³ÙƒÙˆØ¨ Ø§Ù„ØµØ­ÙŠØ­');
    </script>
 <script>
// Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù†Ø¬ÙˆÙ… ÙˆØ§Ù„ÙƒÙˆØ§ÙƒØ¨
function updateStarBrightness(value) {
    if (starsRenderer) {
        starsRenderer.setStarBrightness(parseFloat(value));
        document.getElementById('starBrightnessValue').textContent = value + 'x';
    }
}

function updateStarSize(value) {
    if (starsRenderer) {
        starsRenderer.setStarSize(parseFloat(value));
        document.getElementById('starSizeValue').textContent = value + 'x';
    }
}

function toggleConstellations() {
    const checkbox = document.getElementById('constellationsCheckbox');
    const show = !checkbox.classList.contains('checked');
    
    checkbox.classList.toggle('checked', show);
    
    if (starsRenderer) {
        starsRenderer.toggleConstellations(show);
    }
    
    showNotification(show ? 'âœ¨ Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙˆÙƒØ¨Ø§Øª' : 'ğŸŒŒ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ÙƒÙˆÙƒØ¨Ø§Øª', '', 'info');
}

function toggleSun() {
    const checkbox = document.getElementById('sunCheckbox');
    const show = !checkbox.classList.contains('checked');
    
    checkbox.classList.toggle('checked', show);
    
    if (solarSystem) {
        solarSystem.setVisibility(show, solarSystem.moon?.visible, solarSystem.planets[0]?.visible);
    }
    
    showNotification(show ? 'â˜€ï¸ Ø¹Ø±Ø¶ Ø§Ù„Ø´Ù…Ø³' : 'ğŸŒ‘ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø´Ù…Ø³', '', 'info');
}

function toggleMoon() {
    const checkbox = document.getElementById('moonCheckbox');
    const show = !checkbox.classList.contains('checked');
    
    checkbox.classList.toggle('checked', show);
    
    if (solarSystem) {
        solarSystem.setVisibility(solarSystem.sun?.visible, show, solarSystem.planets[0]?.visible);
    }
    
    showNotification(show ? 'ğŸŒ™ Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ù…Ø±' : 'ğŸŒ‘ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ù…Ø±', '', 'info');
}

function findBrightestStar() {
    if (astroBridge) {
        const brightest = astroBridge.getBrightestStars(1)[0];
        if (brightest) {
            // ØªØ­Ø±ÙŠÙƒ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù†Ø­Ùˆ Ø§Ù„Ù†Ø¬Ù…
            camera.position.set(
                brightest.x * 1.5,
                brightest.y * 1.5,
                brightest.z * 1.5
            );
            camera.lookAt(brightest.x, brightest.y, brightest.z);
            controls.update();
            
            showNotification('â­ Ø§Ù„Ù†Ø¬Ù… Ø§Ù„Ø£Ù„Ù…Ø¹', `${brightest.arabicName || brightest.name} (Ø§Ù„Ù‚Ø¯Ø±: ${brightest.magnitude})`, 'info');
        }
    }
}

function findPolaris() {
    // Ù†Ø¬Ù…Ø© Ø§Ù„Ø´Ù…Ø§Ù„ (Polaris)
    const polaris = {
        name: "Polaris",
        arabicName: "Ù†Ø¬Ù… Ø§Ù„Ø´Ù…Ø§Ù„",
        ra: 2.5303,
        dec: 89.2641
    };
    
    // Ø­Ø³Ø§Ø¨ Ù…ÙˆÙ‚Ø¹Ù‡Ø§ Ø§Ù„Ø­Ø§Ù„ÙŠ
    const spherical = astroBridge.equatorialToHorizontal(
        polaris.ra,
        polaris.dec,
        currentLatitude,
        localSiderealTime
    );
    
    const cartesian = astroBridge.horizontalToCartesian(
        spherical.azimuth,
        spherical.altitude,
        SYSTEM.SPHERE_RADIUS
    );
    
    // ØªØ­Ø±ÙŠÙƒ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
    camera.position.set(
        cartesian.x * 1.5,
        cartesian.y * 1.5,
        cartesian.z * 1.5
    );
    camera.lookAt(cartesian.x, cartesian.y, cartesian.z);
    controls.update();
    
    showNotification('ğŸ§­ Ù†Ø¬Ù… Ø§Ù„Ø´Ù…Ø§Ù„', 'Ø§Ù„Ù†Ø¬Ù… Ø§Ù„Ù‚Ø·Ø¨ÙŠ - ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø´Ù…Ø§Ù„', 'info');
}

function togglePlanetLabels() {
    // ØªØ¨Ø¯ÙŠÙ„ ØªØ³Ù…ÙŠØ§Øª Ø§Ù„ÙƒÙˆØ§ÙƒØ¨
    showNotification('ğŸª ØªØ³Ù…ÙŠØ§Øª Ø§Ù„ÙƒÙˆØ§ÙƒØ¨', 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ·ÙˆÙŠØ±...', 'info');
}
  </script>
</body>
</html>